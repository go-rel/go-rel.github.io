{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"","title":"Home"},{"location":"adapters/","text":"Adapters \u00b6 Rel uses adapter in order to generate and execute query to a database, below is the list of available adapters currently supported. Adapter Package Godoc MySQL github.com/go-rel/mysql PostgreSQL github.com/go-rel/postgres MSSQL github.com/go-rel/mssql SQLite3 github.com/go-rel/sqlite3 Using Primary Replica Connections \u00b6 REL Read Write separation for primary replica connections by using intermediary adapters. package main import ( \"context\" _ \"github.com/go-sql-driver/mysql\" \"github.com/go-rel/primaryreplica\" \"github.com/go-rel/mysql\" \"github.com/go-rel/rel\" ) func main () { // open mysql connections. // note: `clientFoundRows=true` is required for update and delete to works correctly. adapter := primaryreplica . New ( mysql . MustOpen ( \"root@(source:3306)/rel_test?charset=utf8&parseTime=True&loc=Local\" ), mysql . MustOpen ( \"root@(replica1:3306)/rel_test?charset=utf8&parseTime=True&loc=Local\" ), mysql . MustOpen ( \"root@(replica2:3306)/rel_test?charset=utf8&parseTime=True&loc=Local\" ), ) defer adapter . Close () // initialize REL's repo. repo := rel . New ( adapter ) repo . Ping ( context . TODO ()) } Load Balancing of Replicas \u00b6 REL only implements a very primitive load balancing for multiple replicas. For large scale application we recommend you to use external load balancing solution.","title":"Adapters"},{"location":"adapters/#adapters","text":"Rel uses adapter in order to generate and execute query to a database, below is the list of available adapters currently supported. Adapter Package Godoc MySQL github.com/go-rel/mysql PostgreSQL github.com/go-rel/postgres MSSQL github.com/go-rel/mssql SQLite3 github.com/go-rel/sqlite3","title":"Adapters"},{"location":"adapters/#using-primary-replica-connections","text":"REL Read Write separation for primary replica connections by using intermediary adapters. package main import ( \"context\" _ \"github.com/go-sql-driver/mysql\" \"github.com/go-rel/primaryreplica\" \"github.com/go-rel/mysql\" \"github.com/go-rel/rel\" ) func main () { // open mysql connections. // note: `clientFoundRows=true` is required for update and delete to works correctly. adapter := primaryreplica . New ( mysql . MustOpen ( \"root@(source:3306)/rel_test?charset=utf8&parseTime=True&loc=Local\" ), mysql . MustOpen ( \"root@(replica1:3306)/rel_test?charset=utf8&parseTime=True&loc=Local\" ), mysql . MustOpen ( \"root@(replica2:3306)/rel_test?charset=utf8&parseTime=True&loc=Local\" ), ) defer adapter . Close () // initialize REL's repo. repo := rel . New ( adapter ) repo . Ping ( context . TODO ()) }","title":"Using Primary Replica Connections"},{"location":"adapters/#load-balancing-of-replicas","text":"REL only implements a very primitive load balancing for multiple replicas. For large scale application we recommend you to use external load balancing solution.","title":"Load Balancing of Replicas"},{"location":"association/","text":"Association \u00b6 Defining Association \u00b6 Association in REL can be declared by ensuring that each association have an association field, reference id field and foreign id field. Association field is a field with the type of another struct. Reference id is an id field that can be mapped to the foreign id field in another struct. By following that convention, REL currently supports belongs to , has one and has many association. // User schema. type User struct { ID int Name string Age int CreatedAt time . Time UpdatedAt time . Time // has many transactions. // with custom reference and foreign field declaration. // ref: id refers to User.ID field. // fk: buyer_id refers to Transaction.BuyerID Transactions [] Transaction `ref:\"id\" fk:\"buyer_id\"` // has one address. // doesn't contains primary key of other struct. // REL can guess the reference and foreign field if it's not specified. // autosave tag tells rel to automatically save the association when the parent is inserted/updated/deleted. // autoload tag tells rel to automatically load the association when record is queried. // alternatively you can use auto to enable both autoload and autosave. Address Address `autosave:\"true\" autoload:\"true\"` } // Transaction schema. type Transaction struct { ID int Item string Status string // belongs to user. // contains primary key of other struct. Buyer User `ref:\"buyer_id\" fk:\"id\"` BuyerID int } // Address schema. type Address struct { ID int City string // belongs to user. User * User UserID * int } Preloading Association \u00b6 Preload will load association to structs. To preload association, use Preload . Preload Transaction's Buyer ( belongs to association): Example err := repo . Preload ( ctx , & transaction , \"buyer\" ) Mock user := User { ID : 1 , Name : \"Nabe\" } repo . ExpectPreload ( \"buyer\" ). Result ( user ) Preload User's Address ( has one association): Example err := repo . Preload ( ctx , & user , \"address\" ) Mock address := Address { ID : 1 , City : \"Nazarick\" } repo . ExpectPreload ( \"address\" ). Result ( address ) Preload User's Transactions ( has many association): Example err := repo . Preload ( ctx , & user , \"transactions\" ) Mock transactions := [] Transaction { { ID : 1 , Item : \"Avarice and Generosity\" , Status : \"paid\" }, } repo . ExpectPreload ( \"transactions\" ). Result ( transactions ) Preload only paid Transactions from users: Example err := repo . Preload ( ctx , & user , \"transactions\" , where . Eq ( \"status\" , \"paid\" )) Mock transactions := [] Transaction { { ID : 1 , Item : \"Avarice and Generosity\" , Status : \"paid\" }, } repo . ExpectPreload ( \"transactions\" , where . Eq ( \"status\" , \"paid\" )). Result ( transactions ) Preload every Buyer's Address in Transactions (Buyer needs to be preloaded before preloading Buyer's Address): Example err := repo . Preload ( ctx , & transaction , \"buyer.address\" ) Mock userID := 1 addresses := [] Address {{ ID : 1 , City : \"Nazarick\" , UserID : & userID }} repo . ExpectPreload ( \"buyer.address\" ). Result ( addresses ) Preload also support slice, preload multiple transactions at once: Example err := repo . Preload ( ctx , & transaction , \"buyer.address\" ) Mock userID := 1 addresses := [] Address {{ ID : 1 , City : \"Nazarick\" , UserID : & userID }} repo . ExpectPreload ( \"buyer.address\" ). Result ( addresses ) Joining Association \u00b6 Beside manually joining table using Join query, REL can also detect which field to join by using JoinAssoc method. It's also possible to load the result of joined table for has many and belongs to association by specifying it in the Select query. Query Transaction with Buyer ( belongs to association): Example // Select \"buyer.*\" field tell REL to load the joined table to result as well. err := repo . FindAll ( ctx , & transactions , rel . Select ( \"*\" , \"buyer.*\" ). JoinAssoc ( \"buyer\" )) Mock transactions := [] Transaction {{ ID : 1 , BuyerID : 2 , Buyer : User { ID : 2 , Name : \"Nabe\" }}} repo . ExpectFindAll ( rel . Select ( \"*\" , \"buyer.*\" ). JoinAssoc ( \"buyer\" )). Result ( transactions ) Inserting and Updating Association \u00b6 REL can automatically modifies association when it's parent is modified. If ID of association struct is not a zero value, REL will try to update the association, else it'll create a new association. Note Autosave feature needs to be explicitly enabled by adding ( autosave:\"true\" ) tag to the struct definition. Example: see User.Address struct. Example user := User { Name : \"rel\" , Address : Address { City : \"Bandung\" , }, } // Inserts a new record to users and address table. // Result: User{ID: 1, Name: \"rel\", Address: Address{ID: 1, City: \"Bandung\", UserID: 1}} err := repo . Insert ( ctx , & user ) Mock repo . ExpectInsert (). ForType ( \"main.User\" ) REL will try to update a new record for association if ID is a zero value. To update association, it first needs to be preloaded. Example userID := 1 user := User { ID : 1 , Name : \"rel\" , // association is loaded when the primary key (id) is not zero. Address : Address { ID : 1 , UserID : & userID , City : \"Bandung\" , }, } // Update user record with id 1. // Update address record with id 1. err := repo . Update ( ctx , & user ) Mock repo . ExpectUpdate (). ForType ( \"main.User\" ) To selectively update only specific fields or association, use rel.Map . Example mutation := rel . Map { \"address\" : rel . Map { \"city\" : \"bandung\" , }, } // Update address record if it's loaded else it'll creates a new address. // only set city to bandung. err := repo . Update ( ctx , & user , mutation ) Mock mutation := rel . Map { \"address\" : rel . Map { \"city\" : \"bandung\" , }, } // Update address record with id 1, only set city to bandung. repo . ExpectUpdate ( mutation ). ForType ( \"main.User\" ) Auto Saving and Loading Association \u00b6 REL supports automatic loading or saving of association in structs by specifying the following struct tags: autosave=\"true\" : Enables automatic saving of the association whenever parent is inserted/updated/deleted. autoload=\"true\" : Enables automatic preloading of the association whenever parent is queried. auto=\"true\" : Shorthand for enabling both autosave=\"true\" and autoload=\"true\" .","title":"Association"},{"location":"association/#association","text":"","title":"Association"},{"location":"association/#defining-association","text":"Association in REL can be declared by ensuring that each association have an association field, reference id field and foreign id field. Association field is a field with the type of another struct. Reference id is an id field that can be mapped to the foreign id field in another struct. By following that convention, REL currently supports belongs to , has one and has many association. // User schema. type User struct { ID int Name string Age int CreatedAt time . Time UpdatedAt time . Time // has many transactions. // with custom reference and foreign field declaration. // ref: id refers to User.ID field. // fk: buyer_id refers to Transaction.BuyerID Transactions [] Transaction `ref:\"id\" fk:\"buyer_id\"` // has one address. // doesn't contains primary key of other struct. // REL can guess the reference and foreign field if it's not specified. // autosave tag tells rel to automatically save the association when the parent is inserted/updated/deleted. // autoload tag tells rel to automatically load the association when record is queried. // alternatively you can use auto to enable both autoload and autosave. Address Address `autosave:\"true\" autoload:\"true\"` } // Transaction schema. type Transaction struct { ID int Item string Status string // belongs to user. // contains primary key of other struct. Buyer User `ref:\"buyer_id\" fk:\"id\"` BuyerID int } // Address schema. type Address struct { ID int City string // belongs to user. User * User UserID * int }","title":"Defining Association"},{"location":"association/#preloading-association","text":"Preload will load association to structs. To preload association, use Preload . Preload Transaction's Buyer ( belongs to association): Example err := repo . Preload ( ctx , & transaction , \"buyer\" ) Mock user := User { ID : 1 , Name : \"Nabe\" } repo . ExpectPreload ( \"buyer\" ). Result ( user ) Preload User's Address ( has one association): Example err := repo . Preload ( ctx , & user , \"address\" ) Mock address := Address { ID : 1 , City : \"Nazarick\" } repo . ExpectPreload ( \"address\" ). Result ( address ) Preload User's Transactions ( has many association): Example err := repo . Preload ( ctx , & user , \"transactions\" ) Mock transactions := [] Transaction { { ID : 1 , Item : \"Avarice and Generosity\" , Status : \"paid\" }, } repo . ExpectPreload ( \"transactions\" ). Result ( transactions ) Preload only paid Transactions from users: Example err := repo . Preload ( ctx , & user , \"transactions\" , where . Eq ( \"status\" , \"paid\" )) Mock transactions := [] Transaction { { ID : 1 , Item : \"Avarice and Generosity\" , Status : \"paid\" }, } repo . ExpectPreload ( \"transactions\" , where . Eq ( \"status\" , \"paid\" )). Result ( transactions ) Preload every Buyer's Address in Transactions (Buyer needs to be preloaded before preloading Buyer's Address): Example err := repo . Preload ( ctx , & transaction , \"buyer.address\" ) Mock userID := 1 addresses := [] Address {{ ID : 1 , City : \"Nazarick\" , UserID : & userID }} repo . ExpectPreload ( \"buyer.address\" ). Result ( addresses ) Preload also support slice, preload multiple transactions at once: Example err := repo . Preload ( ctx , & transaction , \"buyer.address\" ) Mock userID := 1 addresses := [] Address {{ ID : 1 , City : \"Nazarick\" , UserID : & userID }} repo . ExpectPreload ( \"buyer.address\" ). Result ( addresses )","title":"Preloading Association"},{"location":"association/#joining-association","text":"Beside manually joining table using Join query, REL can also detect which field to join by using JoinAssoc method. It's also possible to load the result of joined table for has many and belongs to association by specifying it in the Select query. Query Transaction with Buyer ( belongs to association): Example // Select \"buyer.*\" field tell REL to load the joined table to result as well. err := repo . FindAll ( ctx , & transactions , rel . Select ( \"*\" , \"buyer.*\" ). JoinAssoc ( \"buyer\" )) Mock transactions := [] Transaction {{ ID : 1 , BuyerID : 2 , Buyer : User { ID : 2 , Name : \"Nabe\" }}} repo . ExpectFindAll ( rel . Select ( \"*\" , \"buyer.*\" ). JoinAssoc ( \"buyer\" )). Result ( transactions )","title":"Joining Association"},{"location":"association/#inserting-and-updating-association","text":"REL can automatically modifies association when it's parent is modified. If ID of association struct is not a zero value, REL will try to update the association, else it'll create a new association. Note Autosave feature needs to be explicitly enabled by adding ( autosave:\"true\" ) tag to the struct definition. Example: see User.Address struct. Example user := User { Name : \"rel\" , Address : Address { City : \"Bandung\" , }, } // Inserts a new record to users and address table. // Result: User{ID: 1, Name: \"rel\", Address: Address{ID: 1, City: \"Bandung\", UserID: 1}} err := repo . Insert ( ctx , & user ) Mock repo . ExpectInsert (). ForType ( \"main.User\" ) REL will try to update a new record for association if ID is a zero value. To update association, it first needs to be preloaded. Example userID := 1 user := User { ID : 1 , Name : \"rel\" , // association is loaded when the primary key (id) is not zero. Address : Address { ID : 1 , UserID : & userID , City : \"Bandung\" , }, } // Update user record with id 1. // Update address record with id 1. err := repo . Update ( ctx , & user ) Mock repo . ExpectUpdate (). ForType ( \"main.User\" ) To selectively update only specific fields or association, use rel.Map . Example mutation := rel . Map { \"address\" : rel . Map { \"city\" : \"bandung\" , }, } // Update address record if it's loaded else it'll creates a new address. // only set city to bandung. err := repo . Update ( ctx , & user , mutation ) Mock mutation := rel . Map { \"address\" : rel . Map { \"city\" : \"bandung\" , }, } // Update address record with id 1, only set city to bandung. repo . ExpectUpdate ( mutation ). ForType ( \"main.User\" )","title":"Inserting and Updating Association"},{"location":"association/#auto-saving-and-loading-association","text":"REL supports automatic loading or saving of association in structs by specifying the following struct tags: autosave=\"true\" : Enables automatic saving of the association whenever parent is inserted/updated/deleted. autoload=\"true\" : Enables automatic preloading of the association whenever parent is queried. auto=\"true\" : Shorthand for enabling both autosave=\"true\" and autoload=\"true\" .","title":"Auto Saving and Loading Association"},{"location":"basics/","text":"Basics \u00b6 Full Example \u00b6 Below is a very basic example on how to utilize REL using mysql adapter. Testing database query using REL can be done using reltest package. main.go package main import ( \"context\" \"time\" \"github.com/go-rel/postgres\" \"github.com/go-rel/rel\" \"github.com/go-rel/rel/where\" _ \"github.com/lib/pq\" ) // Author is a model that maps to authors table. type Author struct { ID int Name string } // Book is a model that maps to books table. type Book struct { ID int Title string Category string Price int Discount bool Stock int AuthorID int Author Author Publisher string CreatedAt time . Time UpdatedAt time . Time } var dsn = \"postgres://postgres@localhost/rel_test?sslmode=disable\" func main () { // initialize postgres adapter. adapter , _ := postgres . Open ( dsn ) defer adapter . Close () // initialize rel's repo. repo := rel . New ( adapter ) // run Example ( context . Background (), repo ) } // Example is an actual service function that run a complex business package. // beware: it's actually doing nonsense here. func Example ( ctx context . Context , repo rel . Repository ) error { var book Book // Quickly find a book with id 1 using short alias. if err := repo . Find ( ctx , & book , where . Eq ( \"id\" , 1 )); err != nil { return err } // Or use chainable query builder. query := rel . Select (). Where ( where . Eq ( \"id\" , 1 )). Limit ( 1 ) if err := repo . Find ( ctx , & book , query ); err != nil { return err } // Convenient method to preload Book's Author. if err := repo . Preload ( ctx , & book , \"author\" ); err != nil { return err } // Performs updates inside a transaction. return repo . Transaction ( ctx , func ( ctx context . Context ) error { // basic update using struct. book . Title = \"REL for dummies\" repo . MustUpdate ( ctx , & book ) // update only specific fields. repo . MustUpdate ( ctx , & book , rel . Set ( \"discount\" , false )) // it even supports atomic inc/dec mutation. return repo . Update ( ctx , & book , rel . Dec ( \"stock\" )) }) } main_test.go package main import ( \"context\" \"testing\" \"github.com/go-rel/rel\" \"github.com/go-rel/rel/where\" \"github.com/go-rel/reltest\" \"github.com/stretchr/testify/assert\" ) func TestExample ( t * testing . T ) { // create a mocked repository. var ( repo = reltest . New () book = Book { ID : 1 , Title : \"Go for dummies\" , Category : \"learning\" , AuthorID : 1 , } author = Author { ID : 1 , Name : \"CZ2I28 Delta\" } ) // mock find and return result repo . ExpectFind ( where . Eq ( \"id\" , 1 )). Result ( book ) // mock find and return result using query builder. repo . ExpectFind ( rel . Select (). Where ( where . Eq ( \"id\" , 1 )). Limit ( 1 )). Result ( book ) // mock preload and return result repo . ExpectPreload ( \"author\" ). ForType ( \"main.Book\" ). Result ( author ) // mocks transaction repo . ExpectTransaction ( func ( repo * reltest . Repository ) { // mock updates repo . ExpectUpdate (). ForType ( \"main.Book\" ) repo . ExpectUpdate ( rel . Set ( \"discount\" , false )). ForType ( \"main.Book\" ) repo . ExpectUpdate ( rel . Dec ( \"stock\" )). ForType ( \"main.Book\" ) }) // run and asserts assert . Nil ( t , Example ( context . Background (), repo )) repo . AssertExpectations ( t ) } Other Examples \u00b6 gin-example - Todo Backend using Gin and REL go-todo-backend - Todo Backend using Chi and REL iris-example - Todo Backend using Iris and REL Conventions \u00b6 Schema Definition \u00b6 REL uses a struct as the schema to infer table name , columns and primary field . // Table name: books type Book struct { ID int // id Title string // title Category string // category CreatedAt time . Time // created_at UpdatedAt time . Time // updated_at } Table Name \u00b6 Table name will be the pluralized struct name in snake case, you may create a Table() string method to override the default table name. // Default table name is `books` type Book struct {} // Override table name to be `ebooks` func ( b Book ) Table () string { return \"ebooks\" } Column Name \u00b6 Column name will be the struct field name in snake case, you may override the column name by using db tag. type Book struct { ID int // this field will be mapped to `id` column. Title string `db:\"name\"` // this field will be mapped to `name` column. Category string `db:\"-\"` // this field will be skipped } Primary Key \u00b6 REL requires every struct to have at least primary key. by default field named id will be used as primary key. To use other field as primary key, you may define it as primary using db tag. Defining multiple field as primary will forms composite primary key. type Book struct { UUID string `db:\"uuid,primary\"` // or just `db:\",primary\"` } Timestamp \u00b6 REL automatically track created and updated time of each struct if CreatedAt or UpdatedAt field exists. Embedded structs \u00b6 REL supports embedding structs and struct pointers. By default, fields of embedded structs have no column name prefix. A prefix can be set with the db tag type Model struct { ID int Owner int } type Book struct { Model `db:\"model_\"` // id and owner will mapped to model_id and model_owner Title string }","title":"Basics"},{"location":"basics/#basics","text":"","title":"Basics"},{"location":"basics/#full-example","text":"Below is a very basic example on how to utilize REL using mysql adapter. Testing database query using REL can be done using reltest package. main.go package main import ( \"context\" \"time\" \"github.com/go-rel/postgres\" \"github.com/go-rel/rel\" \"github.com/go-rel/rel/where\" _ \"github.com/lib/pq\" ) // Author is a model that maps to authors table. type Author struct { ID int Name string } // Book is a model that maps to books table. type Book struct { ID int Title string Category string Price int Discount bool Stock int AuthorID int Author Author Publisher string CreatedAt time . Time UpdatedAt time . Time } var dsn = \"postgres://postgres@localhost/rel_test?sslmode=disable\" func main () { // initialize postgres adapter. adapter , _ := postgres . Open ( dsn ) defer adapter . Close () // initialize rel's repo. repo := rel . New ( adapter ) // run Example ( context . Background (), repo ) } // Example is an actual service function that run a complex business package. // beware: it's actually doing nonsense here. func Example ( ctx context . Context , repo rel . Repository ) error { var book Book // Quickly find a book with id 1 using short alias. if err := repo . Find ( ctx , & book , where . Eq ( \"id\" , 1 )); err != nil { return err } // Or use chainable query builder. query := rel . Select (). Where ( where . Eq ( \"id\" , 1 )). Limit ( 1 ) if err := repo . Find ( ctx , & book , query ); err != nil { return err } // Convenient method to preload Book's Author. if err := repo . Preload ( ctx , & book , \"author\" ); err != nil { return err } // Performs updates inside a transaction. return repo . Transaction ( ctx , func ( ctx context . Context ) error { // basic update using struct. book . Title = \"REL for dummies\" repo . MustUpdate ( ctx , & book ) // update only specific fields. repo . MustUpdate ( ctx , & book , rel . Set ( \"discount\" , false )) // it even supports atomic inc/dec mutation. return repo . Update ( ctx , & book , rel . Dec ( \"stock\" )) }) } main_test.go package main import ( \"context\" \"testing\" \"github.com/go-rel/rel\" \"github.com/go-rel/rel/where\" \"github.com/go-rel/reltest\" \"github.com/stretchr/testify/assert\" ) func TestExample ( t * testing . T ) { // create a mocked repository. var ( repo = reltest . New () book = Book { ID : 1 , Title : \"Go for dummies\" , Category : \"learning\" , AuthorID : 1 , } author = Author { ID : 1 , Name : \"CZ2I28 Delta\" } ) // mock find and return result repo . ExpectFind ( where . Eq ( \"id\" , 1 )). Result ( book ) // mock find and return result using query builder. repo . ExpectFind ( rel . Select (). Where ( where . Eq ( \"id\" , 1 )). Limit ( 1 )). Result ( book ) // mock preload and return result repo . ExpectPreload ( \"author\" ). ForType ( \"main.Book\" ). Result ( author ) // mocks transaction repo . ExpectTransaction ( func ( repo * reltest . Repository ) { // mock updates repo . ExpectUpdate (). ForType ( \"main.Book\" ) repo . ExpectUpdate ( rel . Set ( \"discount\" , false )). ForType ( \"main.Book\" ) repo . ExpectUpdate ( rel . Dec ( \"stock\" )). ForType ( \"main.Book\" ) }) // run and asserts assert . Nil ( t , Example ( context . Background (), repo )) repo . AssertExpectations ( t ) }","title":"Full Example"},{"location":"basics/#other-examples","text":"gin-example - Todo Backend using Gin and REL go-todo-backend - Todo Backend using Chi and REL iris-example - Todo Backend using Iris and REL","title":"Other Examples"},{"location":"basics/#conventions","text":"","title":"Conventions"},{"location":"basics/#schema-definition","text":"REL uses a struct as the schema to infer table name , columns and primary field . // Table name: books type Book struct { ID int // id Title string // title Category string // category CreatedAt time . Time // created_at UpdatedAt time . Time // updated_at }","title":"Schema Definition"},{"location":"basics/#table-name","text":"Table name will be the pluralized struct name in snake case, you may create a Table() string method to override the default table name. // Default table name is `books` type Book struct {} // Override table name to be `ebooks` func ( b Book ) Table () string { return \"ebooks\" }","title":"Table Name"},{"location":"basics/#column-name","text":"Column name will be the struct field name in snake case, you may override the column name by using db tag. type Book struct { ID int // this field will be mapped to `id` column. Title string `db:\"name\"` // this field will be mapped to `name` column. Category string `db:\"-\"` // this field will be skipped }","title":"Column Name"},{"location":"basics/#primary-key","text":"REL requires every struct to have at least primary key. by default field named id will be used as primary key. To use other field as primary key, you may define it as primary using db tag. Defining multiple field as primary will forms composite primary key. type Book struct { UUID string `db:\"uuid,primary\"` // or just `db:\",primary\"` }","title":"Primary Key"},{"location":"basics/#timestamp","text":"REL automatically track created and updated time of each struct if CreatedAt or UpdatedAt field exists.","title":"Timestamp"},{"location":"basics/#embedded-structs","text":"REL supports embedding structs and struct pointers. By default, fields of embedded structs have no column name prefix. A prefix can be set with the db tag type Model struct { ID int Owner int } type Book struct { Model `db:\"model_\"` // id and owner will mapped to model_id and model_owner Title string }","title":"Embedded structs"},{"location":"crud/","text":"Reading and Writing Record \u00b6 Create \u00b6 A new record can be inserted to database using a struct, map or set function. To insert a new record using a struct, simply pass the pointer to the instance as the only argment. Insertion using struct will update created_at and updated_at field if any. Note reltest.Repository will automatically sets any primary key value to be 1. Inserting a record: Example book := Book { Title : \"Rel for dummies\" , Category : \"education\" , Author : Author { Name : \"CZ2I28 Delta\" , }, } // Insert directly using struct. err := repo . Insert ( ctx , & book ) Mock Any repo . ExpectInsert () Mock by Record repo . ExpectInsert (). For ( & Book { Title : \"Rel for dummies\" , Category : \"education\" , Author : Author { Name : \"CZ2I28 Delta\" , }, }) Mock by Type repo . ExpectInsert (). ForType ( \"main.Book\" ) Mock Error repo . ExpectInsert (). ForType ( \"main.Book\" ). Error ( errors . New ( \"oops\" )) To inserts multiple records at once, use InsertAll : Example books := [] Book { { Title : \"Golang for dummies\" , Category : \"education\" , }, { Title : \"Rel for dummies\" , Category : \"education\" , }, } err := repo . InsertAll ( ctx , & books ) Mock repo . ExpectInsertAll (). ForType ( \"[]main.Book\" ) Read \u00b6 REL provides a powerful API for querying record from database. To query a record, simply use the Find method, it accepts the returned result as the first argument, and the conditions for the rest arguments. Retrieve a book with id 1: Example var book Book err := repo . Find ( ctx , & book , rel . Eq ( \"id\" , 1 )) Mock book := Book { Title : \"Rel for dummies\" , Category : \"education\" , } repo . ExpectFind ( rel . Eq ( \"id\" , 1 )). Result ( book ) Retrieve a book with id 1 using syntactic sugar: Example var book Book err := repo . Find ( ctx , & book , where . Eq ( \"id\" , 1 )) Mock repo . ExpectFind ( where . Eq ( \"id\" , 1 )). NotFound () Querying multiple records using FindAll method: Example var books [] Book err := repo . FindAll ( ctx , & books , where . Like ( \"title\" , \"%dummies%\" ). AndEq ( \"category\" , \"education\" ), rel . Limit ( 10 ), ) Mock books := [] Book { { Title : \"Rel for dummies\" , Category : \"education\" , }, } repo . ExpectFindAll ( where . Like ( \"title\" , \"%dummies%\" ). AndEq ( \"category\" , \"education\" ), rel . Limit ( 10 ), ). Result ( books ) Using chainable query api for a more complex query use case: Example var books [] Book query := rel . Select ( \"title\" , \"category\" ). Where ( where . Eq ( \"category\" , \"education\" )). SortAsc ( \"title\" ) err := repo . FindAll ( ctx , & books , query ) Mock books := [] Book { { Title : \"Rel for dummies\" , Category : \"education\" , }, } query := rel . Select ( \"title\" , \"category\" ). Where ( where . Eq ( \"category\" , \"education\" )). SortAsc ( \"title\" ) repo . ExpectFindAll ( query ). Result ( books ) Update \u00b6 Similar to create, updating a record in REL can also be done using struct, map or set function. Updating using struct will also update updated_at field if any. An update using struct will cause all fields and association to be saved to database, regardless of whether it's been updated or not. Use rel.Map , rel.Set or rel.Changeset to update only specific fields. Note When updating belongs to association, it's recommended to not expose reference key ( [other]_id ) for updates directly from user, since there's no way to validate belongs to association using query. Updating a record: Example book . Title = \"REL for dummies\" err := repo . Update ( ctx , & book ) Mock repo . ExpectUpdate (). ForType ( \"main.Book\" ) Updating records is custom query: Example updatedCount , err := repo . UpdateAny ( ctx , rel . From ( \"books\" ). Where ( where . Lt ( \"stock\" , 100 )), rel . Set ( \"discount\" , true )) Mock repo . ExpectUpdateAny ( rel . From ( \"books\" ). Where ( where . Lt ( \"stock\" , 100 )), rel . Set ( \"discount\" , true )) Delete \u00b6 To delete a record in rel, simply pass the record to be deleted. Note REL will automatically apply soft-delete if DeletedAt *time.Time or Deleted bool field exists in a struct. DeletedAt needs to be pointer, otherwise it won't be able to save or store null value. To query soft-deleted records, use rel.Unscoped(true) when querying. Deleting a record: Example err := repo . Delete ( ctx , & book ) Mock repo . ExpectDelete (). For ( & book ) Deleting multiple record: Example err := repo . DeleteAll ( ctx , & books ) Mock repo . ExpectDeleteAll (). For ( & books ) Deleting records using custom query: Example deletedCount , err := repo . DeleteAny ( ctx , rel . From ( \"books\" ). Where ( where . Eq ( \"id\" , 1 ))) Mock repo . ExpectDeleteAny ( rel . From ( \"books\" ). Where ( where . Eq ( \"id\" , 1 )))","title":"Reading and Writing Record"},{"location":"crud/#reading-and-writing-record","text":"","title":"Reading and Writing Record"},{"location":"crud/#create","text":"A new record can be inserted to database using a struct, map or set function. To insert a new record using a struct, simply pass the pointer to the instance as the only argment. Insertion using struct will update created_at and updated_at field if any. Note reltest.Repository will automatically sets any primary key value to be 1. Inserting a record: Example book := Book { Title : \"Rel for dummies\" , Category : \"education\" , Author : Author { Name : \"CZ2I28 Delta\" , }, } // Insert directly using struct. err := repo . Insert ( ctx , & book ) Mock Any repo . ExpectInsert () Mock by Record repo . ExpectInsert (). For ( & Book { Title : \"Rel for dummies\" , Category : \"education\" , Author : Author { Name : \"CZ2I28 Delta\" , }, }) Mock by Type repo . ExpectInsert (). ForType ( \"main.Book\" ) Mock Error repo . ExpectInsert (). ForType ( \"main.Book\" ). Error ( errors . New ( \"oops\" )) To inserts multiple records at once, use InsertAll : Example books := [] Book { { Title : \"Golang for dummies\" , Category : \"education\" , }, { Title : \"Rel for dummies\" , Category : \"education\" , }, } err := repo . InsertAll ( ctx , & books ) Mock repo . ExpectInsertAll (). ForType ( \"[]main.Book\" )","title":"Create"},{"location":"crud/#read","text":"REL provides a powerful API for querying record from database. To query a record, simply use the Find method, it accepts the returned result as the first argument, and the conditions for the rest arguments. Retrieve a book with id 1: Example var book Book err := repo . Find ( ctx , & book , rel . Eq ( \"id\" , 1 )) Mock book := Book { Title : \"Rel for dummies\" , Category : \"education\" , } repo . ExpectFind ( rel . Eq ( \"id\" , 1 )). Result ( book ) Retrieve a book with id 1 using syntactic sugar: Example var book Book err := repo . Find ( ctx , & book , where . Eq ( \"id\" , 1 )) Mock repo . ExpectFind ( where . Eq ( \"id\" , 1 )). NotFound () Querying multiple records using FindAll method: Example var books [] Book err := repo . FindAll ( ctx , & books , where . Like ( \"title\" , \"%dummies%\" ). AndEq ( \"category\" , \"education\" ), rel . Limit ( 10 ), ) Mock books := [] Book { { Title : \"Rel for dummies\" , Category : \"education\" , }, } repo . ExpectFindAll ( where . Like ( \"title\" , \"%dummies%\" ). AndEq ( \"category\" , \"education\" ), rel . Limit ( 10 ), ). Result ( books ) Using chainable query api for a more complex query use case: Example var books [] Book query := rel . Select ( \"title\" , \"category\" ). Where ( where . Eq ( \"category\" , \"education\" )). SortAsc ( \"title\" ) err := repo . FindAll ( ctx , & books , query ) Mock books := [] Book { { Title : \"Rel for dummies\" , Category : \"education\" , }, } query := rel . Select ( \"title\" , \"category\" ). Where ( where . Eq ( \"category\" , \"education\" )). SortAsc ( \"title\" ) repo . ExpectFindAll ( query ). Result ( books )","title":"Read"},{"location":"crud/#update","text":"Similar to create, updating a record in REL can also be done using struct, map or set function. Updating using struct will also update updated_at field if any. An update using struct will cause all fields and association to be saved to database, regardless of whether it's been updated or not. Use rel.Map , rel.Set or rel.Changeset to update only specific fields. Note When updating belongs to association, it's recommended to not expose reference key ( [other]_id ) for updates directly from user, since there's no way to validate belongs to association using query. Updating a record: Example book . Title = \"REL for dummies\" err := repo . Update ( ctx , & book ) Mock repo . ExpectUpdate (). ForType ( \"main.Book\" ) Updating records is custom query: Example updatedCount , err := repo . UpdateAny ( ctx , rel . From ( \"books\" ). Where ( where . Lt ( \"stock\" , 100 )), rel . Set ( \"discount\" , true )) Mock repo . ExpectUpdateAny ( rel . From ( \"books\" ). Where ( where . Lt ( \"stock\" , 100 )), rel . Set ( \"discount\" , true ))","title":"Update"},{"location":"crud/#delete","text":"To delete a record in rel, simply pass the record to be deleted. Note REL will automatically apply soft-delete if DeletedAt *time.Time or Deleted bool field exists in a struct. DeletedAt needs to be pointer, otherwise it won't be able to save or store null value. To query soft-deleted records, use rel.Unscoped(true) when querying. Deleting a record: Example err := repo . Delete ( ctx , & book ) Mock repo . ExpectDelete (). For ( & book ) Deleting multiple record: Example err := repo . DeleteAll ( ctx , & books ) Mock repo . ExpectDeleteAll (). For ( & books ) Deleting records using custom query: Example deletedCount , err := repo . DeleteAny ( ctx , rel . From ( \"books\" ). Where ( where . Eq ( \"id\" , 1 ))) Mock repo . ExpectDeleteAny ( rel . From ( \"books\" ). Where ( where . Eq ( \"id\" , 1 )))","title":"Delete"},{"location":"instrumentation/","text":"Instrumentation \u00b6 REL provides hooks that can be used to log or instrument your queries. repo . Instrumentation ( func ( ctx context . Context , op string , message string , args ... any ) func ( err error ) { t := time . Now () return func ( err error ) { duration := time . Since ( t ) log . Print ( \"[duration: \" , duration , \" op: \" , op , \"] \" , message , \" - \" , err ) } }) This is the list for available operations: rel-aggregate rel-count rel-find rel-find-all rel-find-and-count-all rel-scan-one rel-scan-all rel-scan-multi rel-insert rel-insert-all rel-update rel-delete rel-delete-any rel-preload rel-transaction adapter-aggregate adapter-query adapter-exec adapter-begin adapter-commit adapter-rollback","title":"Instrumentation"},{"location":"instrumentation/#instrumentation","text":"REL provides hooks that can be used to log or instrument your queries. repo . Instrumentation ( func ( ctx context . Context , op string , message string , args ... any ) func ( err error ) { t := time . Now () return func ( err error ) { duration := time . Since ( t ) log . Print ( \"[duration: \" , duration , \" op: \" , op , \"] \" , message , \" - \" , err ) } }) This is the list for available operations: rel-aggregate rel-count rel-find rel-find-all rel-find-and-count-all rel-scan-one rel-scan-all rel-scan-multi rel-insert rel-insert-all rel-update rel-delete rel-delete-any rel-preload rel-transaction adapter-aggregate adapter-query adapter-exec adapter-begin adapter-commit adapter-rollback","title":"Instrumentation"},{"location":"introduction/","text":"Introduction \u00b6 REL is golang orm-ish database layer for layered architecture. It's testable and comes with it's own test library. REL also features extendable query builder that allows you to write query using builder or plain sql. Features \u00b6 Testable repository with builtin reltest package. Seamless nested transactions. Elegant, yet extendable query builder with mix of syntactic sugar. Supports Eager loading. Composite Primary Key. Multi adapter. Soft Deletion. Pagination. Schema Migration. Install \u00b6 go get github.com/go-rel/rel Why rel \u00b6 Easy to test \u00b6 Most (if not all) orm for golang is written as a chainable API, meaning all of the query need to be called before performing actual action as a chain of method invocations. example: db . Where ( \"id = ?\" , 1 ). First ( & user ) Chainable api is very hard to be unit tested without writing a wrapper. One way to make it testable is to make an interface that also acts as a wrapper, which is usually ends up as its own repository package resides somewhere in your project: // mockable interface. type UserRepository interface { Find ( user * User , id int ) error } // actual implementation type userRepository struct { db * DB } func ( ur userRepository ) Find ( user * User , id int ) error { return db . Where ( \"id = ?\" , 1 ). First ( & user ) } Compared to other orm, REL api is built with testability in mind. REL uses interface to define contract of every database query or execution, all while making a chainable query possible. The ultimate goal of REL is to be your database package without the needs of making your own wrapper. Seamless transactions \u00b6 When starting a transaction using builtin database/sql package or other orm, special transaction instance that's similar to non-transaction instance is returned, and all execution needs to be called using that instance to be in transaction: // start transaction tx := db . Begin () // do some database operations in the transaction (use 'tx' from this point, not 'db') tx . Create ( ... ) // Or commit the transaction tx . Commit () Now what happens if you want to introduce a shared function, that might execute it's operation on a transaction or on a regular connection depending on the caller? you may end up with a function that may not only accepts conventional context argument, but also a tx or connection argument. tx := db . Begin () tx . Create ( ... ) // UpdateOtherEntity(txOrDb TxOrDbInterface, ...) UpdateOtherEntity ( tx , ... ) tx . Commit () REL attempts to solve that problem by managing transaction state using context, the REL repository can decide whether to use transaction or not based on provided context, performs commit or rollback in case of exception, and even supports nested transaction (see: transactions ).","title":"Introduction"},{"location":"introduction/#introduction","text":"REL is golang orm-ish database layer for layered architecture. It's testable and comes with it's own test library. REL also features extendable query builder that allows you to write query using builder or plain sql.","title":"Introduction"},{"location":"introduction/#features","text":"Testable repository with builtin reltest package. Seamless nested transactions. Elegant, yet extendable query builder with mix of syntactic sugar. Supports Eager loading. Composite Primary Key. Multi adapter. Soft Deletion. Pagination. Schema Migration.","title":"Features"},{"location":"introduction/#install","text":"go get github.com/go-rel/rel","title":"Install"},{"location":"introduction/#why-rel","text":"","title":"Why rel"},{"location":"introduction/#easy-to-test","text":"Most (if not all) orm for golang is written as a chainable API, meaning all of the query need to be called before performing actual action as a chain of method invocations. example: db . Where ( \"id = ?\" , 1 ). First ( & user ) Chainable api is very hard to be unit tested without writing a wrapper. One way to make it testable is to make an interface that also acts as a wrapper, which is usually ends up as its own repository package resides somewhere in your project: // mockable interface. type UserRepository interface { Find ( user * User , id int ) error } // actual implementation type userRepository struct { db * DB } func ( ur userRepository ) Find ( user * User , id int ) error { return db . Where ( \"id = ?\" , 1 ). First ( & user ) } Compared to other orm, REL api is built with testability in mind. REL uses interface to define contract of every database query or execution, all while making a chainable query possible. The ultimate goal of REL is to be your database package without the needs of making your own wrapper.","title":"Easy to test"},{"location":"introduction/#seamless-transactions","text":"When starting a transaction using builtin database/sql package or other orm, special transaction instance that's similar to non-transaction instance is returned, and all execution needs to be called using that instance to be in transaction: // start transaction tx := db . Begin () // do some database operations in the transaction (use 'tx' from this point, not 'db') tx . Create ( ... ) // Or commit the transaction tx . Commit () Now what happens if you want to introduce a shared function, that might execute it's operation on a transaction or on a regular connection depending on the caller? you may end up with a function that may not only accepts conventional context argument, but also a tx or connection argument. tx := db . Begin () tx . Create ( ... ) // UpdateOtherEntity(txOrDb TxOrDbInterface, ...) UpdateOtherEntity ( tx , ... ) tx . Commit () REL attempts to solve that problem by managing transaction state using context, the REL repository can decide whether to use transaction or not based on provided context, performs commit or rollback in case of exception, and even supports nested transaction (see: transactions ).","title":"Seamless transactions"},{"location":"migration/","text":"Migration \u00b6 Overview \u00b6 Migration is a feature that allows you to evolve your database schema over time, REL provides DSL that allows you to write migration in Golang. Defining Migration \u00b6 Migration package usually located inside your-repo/db/migrations package. It's a standalone package that should not be imported by the rest of your application. Each migration file is named as number_name.go , and each migration file must define a pair of migration and rollback functions: MigrateName and RollbackName . Migrate and rollback function name is the camel cased file name without version. Note Sample project that demonstrate this setup can be found at go-rel/gin-example // 20202806225100_create_todos.go package migrations import ( \"context\" \"github.com/go-rel/rel\" ) // MigrateCreateTodos definition func MigrateCreateTodos ( schema * rel . Schema ) { schema . CreateTable ( \"todos\" , func ( t * rel . Table ) { t . ID ( \"id\" ) t . DateTime ( \"created_at\" ) t . DateTime ( \"updated_at\" ) t . String ( \"title\" ) t . Bool ( \"completed\" ) t . Int ( \"order\" ) }) schema . CreateIndex ( \"todos\" , \"order\" , [] string { \"order\" }) schema . Do ( func ( ctx context . Context , repo rel . Repository ) error { // add seeds return repo . Insert ( ctx , & Todo { Title : \"Do homework\" }) }) } // RollbackCreateTodos definition func RollbackCreateTodos ( schema * rel . Schema ) { schema . DropTable ( \"todos\" ) } Running Migration \u00b6 REL provides CLI that can be used to run your migration, it can be installed using homebrew , go get or downloaded from release page . Install using homebrew: brew tap go-rel/tap brew install rel Or, Install using go get: go get github.com/go-rel/rel/cmd/rel Verify installation: rel -version Migrate to the latest version: rel migrate Rollback one migration step: rel rollback Configuring Database Connection \u00b6 By default, REL will try to use database connection info that available as environment variable. Variable Description DATABASE_URL Database connection string (Optional) DATABASE_ADAPTER Adapter package (Required if DATABASE_URL specified) DATABASE_DRIVER Driver package (Required if DATABASE_URL specified) MYSQL_HOST MySQL host (Optional) MYSQL_PORT MySQL port (Optional) MYSQL_DATABASE MySQL database (Required, if MYSQL_HOST specified) MYSQL_USERNAME MySQL host (Required, if MYSQL_HOST specified) MYSQL_PASSWORD MySQL host (Optional) POSTGRES_HOST PostgreSQL host (Optional) POSTGRES_PORT PostgreSQL port (Optional) POSTGRES_DATABASE PostgreSQL database (Required, if POSTGRES_HOST specified) POSTGRES_USERNAME PostgreSQL username (Required, if POSTGRES_HOST specified) POSTGRES_PASSWORD PostgreSQL password (Optional) SQLITE3_DATABASE SQLite3 database (Optional) Database connection info can also be specified using command line options: dsn , adapter and driver : rel migrate -adapter = github.com/go-rel/rel/adapter/sqlite3 -driver = github.com/mattn/go-sqlite3 -dsn = :memory: Migration API \u00b6 If you need more flexibility, migration API can be used to manually execute migrations. package main import ( \"context\" \"github.com/go-rel/doc/examples/db/migrations\" \"github.com/go-rel/migration\" \"github.com/go-rel/mysql\" \"github.com/go-rel/rel\" _ \"github.com/go-sql-driver/mysql\" ) func main () { var ( ctx = context . TODO () repo = rel . New ( mysql . MustOpen ( \"root@(source:3306)/rel_test?charset=utf8&parseTime=True&loc=Local\" )) m = migration . New ( repo ) ) // Register migrations m . Register ( 20202806225100 , migrations . MigrateCreateTodos , migrations . RollbackCreateTodos ) // Run migrations m . Migrate ( ctx ) // OR: // m.Rollback(ctx) }","title":"Migration"},{"location":"migration/#migration","text":"","title":"Migration"},{"location":"migration/#overview","text":"Migration is a feature that allows you to evolve your database schema over time, REL provides DSL that allows you to write migration in Golang.","title":"Overview"},{"location":"migration/#defining-migration","text":"Migration package usually located inside your-repo/db/migrations package. It's a standalone package that should not be imported by the rest of your application. Each migration file is named as number_name.go , and each migration file must define a pair of migration and rollback functions: MigrateName and RollbackName . Migrate and rollback function name is the camel cased file name without version. Note Sample project that demonstrate this setup can be found at go-rel/gin-example // 20202806225100_create_todos.go package migrations import ( \"context\" \"github.com/go-rel/rel\" ) // MigrateCreateTodos definition func MigrateCreateTodos ( schema * rel . Schema ) { schema . CreateTable ( \"todos\" , func ( t * rel . Table ) { t . ID ( \"id\" ) t . DateTime ( \"created_at\" ) t . DateTime ( \"updated_at\" ) t . String ( \"title\" ) t . Bool ( \"completed\" ) t . Int ( \"order\" ) }) schema . CreateIndex ( \"todos\" , \"order\" , [] string { \"order\" }) schema . Do ( func ( ctx context . Context , repo rel . Repository ) error { // add seeds return repo . Insert ( ctx , & Todo { Title : \"Do homework\" }) }) } // RollbackCreateTodos definition func RollbackCreateTodos ( schema * rel . Schema ) { schema . DropTable ( \"todos\" ) }","title":"Defining Migration"},{"location":"migration/#running-migration","text":"REL provides CLI that can be used to run your migration, it can be installed using homebrew , go get or downloaded from release page . Install using homebrew: brew tap go-rel/tap brew install rel Or, Install using go get: go get github.com/go-rel/rel/cmd/rel Verify installation: rel -version Migrate to the latest version: rel migrate Rollback one migration step: rel rollback","title":"Running Migration"},{"location":"migration/#configuring-database-connection","text":"By default, REL will try to use database connection info that available as environment variable. Variable Description DATABASE_URL Database connection string (Optional) DATABASE_ADAPTER Adapter package (Required if DATABASE_URL specified) DATABASE_DRIVER Driver package (Required if DATABASE_URL specified) MYSQL_HOST MySQL host (Optional) MYSQL_PORT MySQL port (Optional) MYSQL_DATABASE MySQL database (Required, if MYSQL_HOST specified) MYSQL_USERNAME MySQL host (Required, if MYSQL_HOST specified) MYSQL_PASSWORD MySQL host (Optional) POSTGRES_HOST PostgreSQL host (Optional) POSTGRES_PORT PostgreSQL port (Optional) POSTGRES_DATABASE PostgreSQL database (Required, if POSTGRES_HOST specified) POSTGRES_USERNAME PostgreSQL username (Required, if POSTGRES_HOST specified) POSTGRES_PASSWORD PostgreSQL password (Optional) SQLITE3_DATABASE SQLite3 database (Optional) Database connection info can also be specified using command line options: dsn , adapter and driver : rel migrate -adapter = github.com/go-rel/rel/adapter/sqlite3 -driver = github.com/mattn/go-sqlite3 -dsn = :memory:","title":"Configuring Database Connection"},{"location":"migration/#migration-api","text":"If you need more flexibility, migration API can be used to manually execute migrations. package main import ( \"context\" \"github.com/go-rel/doc/examples/db/migrations\" \"github.com/go-rel/migration\" \"github.com/go-rel/mysql\" \"github.com/go-rel/rel\" _ \"github.com/go-sql-driver/mysql\" ) func main () { var ( ctx = context . TODO () repo = rel . New ( mysql . MustOpen ( \"root@(source:3306)/rel_test?charset=utf8&parseTime=True&loc=Local\" )) m = migration . New ( repo ) ) // Register migrations m . Register ( 20202806225100 , migrations . MigrateCreateTodos , migrations . RollbackCreateTodos ) // Run migrations m . Migrate ( ctx ) // OR: // m.Rollback(ctx) }","title":"Migration API"},{"location":"mutations/","text":"Mutations \u00b6 Basic Mutator \u00b6 REL uses mutator to define inserts and updates operation. Using basic mutator won't update created_at and updated_at fields. Mutator Description Dec(field string) Decrement a field value by 1 DecBy(field string, n int) Decrement a field value by n Inc(field string) Increase a field value by 1 IncBy(field string, n int) Increase a field value by n Set(field string, value interface{}) Set a value to a field SetFragment(raw string, args ...interface{}) Set a value of a field using SQL fragment Set title and category values: Example err := repo . Update ( ctx , & book , rel . Set ( \"title\" , \"REL for Dummies\" ), rel . Set ( \"category\" , \"technology\" ), ) Mock repo . ExpectUpdate ( rel . Set ( \"title\" , \"REL for Dummies\" ), rel . Set ( \"category\" , \"technology\" ), ). For ( & book ) Decrement stock: Example err := repo . Update ( ctx , & book , rel . DecBy ( \"stock\" , 2 )) Mock repo . ExpectUpdate ( rel . DecBy ( \"stock\" , 2 )). For ( & book ) Update title using SQL fragment: Example err := repo . Update ( ctx , & book , rel . SetFragment ( \"title=?\" , \"REL for dummies\" )) Mock repo . ExpectUpdate ( rel . SetFragment ( \"title=?\" , \"REL for dummies\" )). For ( & book ) Structset \u00b6 Structset is a mutator that generates list of Set mutators based on a struct value. Using Structset will result in replacing the intire record in the database using provided struct, It'll always clear a has many association and re-insert it on updates if it's loaded. Changeset can be used to avoid clearing has many association on updates. Note Structset is the default mutator used when none is provided explicitly. Inserting a struct using structset mutator: Example structset := rel . NewStructset ( & book , false ) err := repo . Insert ( ctx , & book , structset ) Mock repo . ExpectInsert (). For ( & book ) Changeset \u00b6 Changeset allows you to track and update only updated values and asssociation to database. This is very efficient when dealing with a complex struct that contains a lot of fields and associations. Update only price and discount field using changeset: Example changeset := rel . NewChangeset ( & book ) book . Price = 10 if changeset . FieldChanged ( \"price\" ) { book . Discount = false } err := repo . Update ( ctx , & book , changeset ) Mock repo . ExpectUpdate (). ForType ( \"main.Book\" ) Map \u00b6 Map allows to define group of Set mutator, this is intended to be use internally and not to be exposed directly to user. Mutation defined in the map will be applied to the struct passed as the first argument. Insert/Update using map wont update created_at or updated_at field. Insert books and its author using Map : Example data := rel . Map { \"title\" : \"Rel for dummies\" , \"category\" : \"education\" , \"author\" : rel . Map { \"name\" : \"CZ2I28 Delta\" , }, } // Insert using map. err := repo . Insert ( ctx , & book , data ) Mock data := rel . Map { \"title\" : \"Rel for dummies\" , \"category\" : \"education\" , \"author\" : rel . Map { \"name\" : \"CZ2I28 Delta\" , }, } repo . ExpectInsert ( data ). ForType ( \"main.Book\" ) Reloading Updated Struct \u00b6 By default, only Inc , IncBy , Dec , DecBy and SetFragment will reload struct from database, Reload mutator can be used to manually trigger reload after inserts/update operations. Update title and force reload: Example err := repo . Update ( ctx , & book , rel . Set ( \"title\" , \"REL for Dummies\" ), rel . Reload ( true ), ) Mock repo . ExpectUpdate ( rel . Set ( \"title\" , \"REL for Dummies\" ), rel . Reload ( true ), ). For ( & book ) Cascade Operations \u00b6 REL supports insert/update/delete record and it's associations. Disable cascade insert (default enabled): Example err := repo . Insert ( ctx , & book , rel . Cascade ( false )) Mock repo . ExpectInsert ( rel . Cascade ( false )). For ( & book ) Enable cascade delete (default disabled): Example err := repo . Delete ( ctx , & book , rel . Cascade ( true )) Mock repo . ExpectDelete ( rel . Cascade ( true )). For ( & book )","title":"Mutations"},{"location":"mutations/#mutations","text":"","title":"Mutations"},{"location":"mutations/#basic-mutator","text":"REL uses mutator to define inserts and updates operation. Using basic mutator won't update created_at and updated_at fields. Mutator Description Dec(field string) Decrement a field value by 1 DecBy(field string, n int) Decrement a field value by n Inc(field string) Increase a field value by 1 IncBy(field string, n int) Increase a field value by n Set(field string, value interface{}) Set a value to a field SetFragment(raw string, args ...interface{}) Set a value of a field using SQL fragment Set title and category values: Example err := repo . Update ( ctx , & book , rel . Set ( \"title\" , \"REL for Dummies\" ), rel . Set ( \"category\" , \"technology\" ), ) Mock repo . ExpectUpdate ( rel . Set ( \"title\" , \"REL for Dummies\" ), rel . Set ( \"category\" , \"technology\" ), ). For ( & book ) Decrement stock: Example err := repo . Update ( ctx , & book , rel . DecBy ( \"stock\" , 2 )) Mock repo . ExpectUpdate ( rel . DecBy ( \"stock\" , 2 )). For ( & book ) Update title using SQL fragment: Example err := repo . Update ( ctx , & book , rel . SetFragment ( \"title=?\" , \"REL for dummies\" )) Mock repo . ExpectUpdate ( rel . SetFragment ( \"title=?\" , \"REL for dummies\" )). For ( & book )","title":"Basic Mutator"},{"location":"mutations/#structset","text":"Structset is a mutator that generates list of Set mutators based on a struct value. Using Structset will result in replacing the intire record in the database using provided struct, It'll always clear a has many association and re-insert it on updates if it's loaded. Changeset can be used to avoid clearing has many association on updates. Note Structset is the default mutator used when none is provided explicitly. Inserting a struct using structset mutator: Example structset := rel . NewStructset ( & book , false ) err := repo . Insert ( ctx , & book , structset ) Mock repo . ExpectInsert (). For ( & book )","title":"Structset"},{"location":"mutations/#changeset","text":"Changeset allows you to track and update only updated values and asssociation to database. This is very efficient when dealing with a complex struct that contains a lot of fields and associations. Update only price and discount field using changeset: Example changeset := rel . NewChangeset ( & book ) book . Price = 10 if changeset . FieldChanged ( \"price\" ) { book . Discount = false } err := repo . Update ( ctx , & book , changeset ) Mock repo . ExpectUpdate (). ForType ( \"main.Book\" )","title":"Changeset"},{"location":"mutations/#map","text":"Map allows to define group of Set mutator, this is intended to be use internally and not to be exposed directly to user. Mutation defined in the map will be applied to the struct passed as the first argument. Insert/Update using map wont update created_at or updated_at field. Insert books and its author using Map : Example data := rel . Map { \"title\" : \"Rel for dummies\" , \"category\" : \"education\" , \"author\" : rel . Map { \"name\" : \"CZ2I28 Delta\" , }, } // Insert using map. err := repo . Insert ( ctx , & book , data ) Mock data := rel . Map { \"title\" : \"Rel for dummies\" , \"category\" : \"education\" , \"author\" : rel . Map { \"name\" : \"CZ2I28 Delta\" , }, } repo . ExpectInsert ( data ). ForType ( \"main.Book\" )","title":"Map"},{"location":"mutations/#reloading-updated-struct","text":"By default, only Inc , IncBy , Dec , DecBy and SetFragment will reload struct from database, Reload mutator can be used to manually trigger reload after inserts/update operations. Update title and force reload: Example err := repo . Update ( ctx , & book , rel . Set ( \"title\" , \"REL for Dummies\" ), rel . Reload ( true ), ) Mock repo . ExpectUpdate ( rel . Set ( \"title\" , \"REL for Dummies\" ), rel . Reload ( true ), ). For ( & book )","title":"Reloading Updated Struct"},{"location":"mutations/#cascade-operations","text":"REL supports insert/update/delete record and it's associations. Disable cascade insert (default enabled): Example err := repo . Insert ( ctx , & book , rel . Cascade ( false )) Mock repo . ExpectInsert ( rel . Cascade ( false )). For ( & book ) Enable cascade delete (default disabled): Example err := repo . Delete ( ctx , & book , rel . Cascade ( true )) Mock repo . ExpectDelete ( rel . Cascade ( true )). For ( & book )","title":"Cascade Operations"},{"location":"queries/","text":"Queries \u00b6 Retrieving Data \u00b6 REL provides two basic finders method, Find for retrieving single record, and FindAll for retrieving multiple record. Note Find only accepts struct as the first argument, and always return the first result from the query. FindAll only accepts slice as the first argument, and always return all result from the query. Retrieve a book where id=1: Example var book Book err := repo . Find ( ctx , & book , where . Eq ( \"id\" , 1 )) Mock book := Book { ID : 1 , Title : \"REL for dummies\" } repo . ExpectFind ( where . Eq ( \"id\" , 1 )). Result ( book ) Retrieve all books: Example var books [] Book err := repo . FindAll ( ctx , & books ) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll (). Result ( books ) Conditions \u00b6 To retrieve filtered recods from database, you can use filter api to specify condition . For example, to filter all books that available, you can use rel.Eq in the query builder. Retrieve all available books using filter query: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . Eq ( \"available\" , true )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( rel . Eq ( \"available\" , true )). Result ( books ) Alias can be used to boost readability when dealing with short query: Example var books [] Book err := repo . FindAll ( ctx , & books , where . Eq ( \"available\" , true )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( where . Eq ( \"available\" , true )). Result ( books ) Use fragment to specify custom SQL query: Example var books [] Book err := repo . FindAll ( ctx , & books , where . Fragment ( \"available=?\" , true )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( where . Fragment ( \"available=?\" , true )). Result ( books ) You can use rel.And or rel.Or to specify more conditions. Retrieve all available books where price is at least 100 or in discount using filter query: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . And ( rel . Eq ( \"available\" , true ), rel . Or ( rel . Gte ( \"price\" , 100 ), rel . Eq ( \"discount\" , true )))) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , Price : 100 }, { ID : 2 , Title : \"REL for dummies\" , Price : 50 , Discount : true }, } repo . ExpectFindAll ( rel . And ( rel . Eq ( \"available\" , true ), rel . Or ( rel . Gte ( \"price\" , 100 ), rel . Eq ( \"discount\" , true )))). Result ( books ) Retrieve all available books where price is at least 100 or in discount using chained filter query: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . Eq ( \"available\" , true ). And ( rel . Gte ( \"price\" , 100 ). OrEq ( \"discount\" , true ))) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , Price : 100 }, { ID : 2 , Title : \"REL for dummies\" , Price : 50 , Discount : true }, } repo . ExpectFindAll ( rel . Eq ( \"available\" , true ). And ( rel . Gte ( \"price\" , 100 ). OrEq ( \"discount\" , true ))). Result ( books ) Retrieve all available books where price is at least 100 or in discount using alias ( github.com/go-rel/rel/where ): Example var books [] Book err := repo . FindAll ( ctx , & books , where . Eq ( \"available\" , true ). And ( where . Gte ( \"price\" , 100 ). OrEq ( \"discount\" , true ))) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , Price : 100 }, { ID : 2 , Title : \"REL for dummies\" , Price : 50 , Discount : true }, } repo . ExpectFindAll ( where . Eq ( \"available\" , true ). And ( where . Gte ( \"price\" , 100 ). OrEq ( \"discount\" , true ))). Result ( books ) Subquery \u00b6 Subquery is supported in condition clause, you can pass any query to the where/having parameter. Retrieve all books that is cheaper than average book price: Example var books [] Book err := repo . FindAll ( ctx , & books , where . Lt ( \"price\" , rel . Select ( \"AVG(price)\" ). From ( \"books\" ))) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , Price : 100 }, { ID : 2 , Title : \"REL for dummies\" , Price : 50 , Discount : true }, } repo . ExpectFindAll ( where . Lt ( \"price\" , rel . Select ( \"AVG(price)\" ). From ( \"books\" ))). Result ( books ) Sorting \u00b6 To retrieve records from database in a specific order, you can use the sort api. Sort books ascending by updated_at field: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . NewSortAsc ( \"updated_at\" )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , UpdatedAt : time . Now ()}, } repo . ExpectFindAll ( rel . NewSortAsc ( \"updated_at\" )). Result ( books ) Using alias if you need more syntactic sugar: Example var books [] Book err := repo . FindAll ( ctx , & books , sort . Asc ( \"updated_at\" )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , UpdatedAt : time . Now ()}, } repo . ExpectFindAll ( sort . Asc ( \"updated_at\" )). Result ( books ) Combining with other query is fairly easy. Chain where and sort using query builder: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . Where ( where . Eq ( \"available\" , true )). SortAsc ( \"updated_at\" )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , UpdatedAt : time . Now ()}, } repo . ExpectFindAll ( rel . Where ( where . Eq ( \"available\" , true )). SortAsc ( \"updated_at\" )). Result ( books ) It's also possible to use variadic arguments to combine multiple queries: Example var books [] Book err := repo . FindAll ( ctx , & books , where . Eq ( \"available\" , true ), sort . Asc ( \"updated_at\" )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , UpdatedAt : time . Now ()}, } repo . ExpectFindAll ( where . Eq ( \"available\" , true ), sort . Asc ( \"updated_at\" )). Result ( books ) Selecting Specific Fields \u00b6 To select specific fields, you can use Select method, this way only specificied field will be mapped to books. Note Specifying select without argument ( rel.Select() ) will automatically load all fields. This is helpful when used as query builder entry point (compared to using rel.From ), because you can let REL to infer the table name. Load only id and title: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . Select ( \"id\" , \"title\" )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( rel . Select ( \"id\" , \"title\" )). Result ( books ) Using Specific Table \u00b6 By default, REL will use pluralized-snakecase struct name as the table name. To select from specific table, you can use From method. Load from ebooks table: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . From ( \"ebooks\" )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( rel . From ( \"ebooks\" )). Result ( books ) Chain the query with select: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . Select ( \"id\" , \"title\" ). From ( \"ebooks\" )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( rel . Select ( \"id\" , \"title\" ). From ( \"ebooks\" )). Result ( books ) Limit and Offset \u00b6 To set the limit and offset of query, use Limit and Offset api. Offset will be ignored if Limit is not specified. Specify limit and offset: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . Limit ( 10 ), rel . Offset ( 20 )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( rel . Limit ( 10 ), rel . Offset ( 20 )). Result ( books ) As a chainable api: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . Select (). Limit ( 10 ). Offset ( 20 )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( rel . Select (). Limit ( 10 ). Offset ( 20 )). Result ( books ) Group \u00b6 To use group by query, you can use Group method. Retrieve count of books for every category: Example // custom struct to store the result. var results [] struct { Category string Total int } // we need to explicitly specify table name since we are using an anonymous struct. err := repo . FindAll ( ctx , & results , rel . Select ( \"category\" , \"COUNT(id) as total\" ). From ( \"books\" ). Group ( \"category\" )) Mock results := [] struct { Category string Total int }{ { Category : \"education\" , Total : 100 }, } repo . ExpectFindAll ( rel . Select ( \"category\" , \"COUNT(id) as total\" ). From ( \"books\" ). Group ( \"category\" )). Result ( results ) Joining Tables \u00b6 To join tables, you can use join api. Note Joining table won't automatically load the association to struct. If you want to load association on a struct, try JoinAssoc or better use preload instead. Join transaction and book table, then filter only transaction that have specified book name. This methods assumes belongs to relation, which means it'll try to join using transactions.book_id=books.id : Example var transactions [] Transaction err := repo . FindAll ( ctx , & transactions , rel . Join ( \"books\" ). Where ( where . Eq ( \"books.name\" , \"REL for Dummies\" ))) Mock transactions := [] Transaction { { ID : 1 , Status : \"paid\" }, } repo . ExpectFindAll ( rel . Join ( \"books\" ). Where ( where . Eq ( \"books.name\" , \"REL for Dummies\" ))). Result ( transactions ) Specifying which column to join using JoinOn: Example var transactions [] Transaction err := repo . FindAll ( ctx , & transactions , rel . JoinOn ( \"books\" , \"transactions.book_id\" , \"books.id\" )) Mock transactions := [] Transaction { { ID : 1 , Status : \"paid\" }, } repo . ExpectFindAll ( rel . JoinOn ( \"books\" , \"transactions.book_id\" , \"books.id\" )). Result ( transactions ) Syntactic sugar also available for join: Example var transactions [] Transaction err := repo . FindAll ( ctx , & transactions , join . On ( \"books\" , \"transactions.book_id\" , \"books.id\" )) Mock transactions := [] Transaction { { ID : 1 , Status : \"paid\" }, } repo . ExpectFindAll ( join . On ( \"books\" , \"transactions.book_id\" , \"books.id\" )). Result ( transactions ) Joining table with custom join mode: Example var transactions [] Transaction err := repo . FindAll ( ctx , & transactions , rel . JoinWith ( \"LEFT JOIN\" , \"books\" , \"transactions.book_id\" , \"books.id\" )) Mock transactions := [] Transaction { { ID : 1 , Status : \"paid\" }, } repo . ExpectFindAll ( rel . JoinWith ( \"LEFT JOIN\" , \"books\" , \"transactions.book_id\" , \"books.id\" )). Result ( transactions ) Use fragment for more complex join query: Example var transactions [] Transaction err := repo . FindAll ( ctx , & transactions , rel . Joinf ( \"JOIN `books` ON `transactions`.`book_id`=`books`.`id`\" )) Mock transactions := [] Transaction { { ID : 1 , Status : \"paid\" }, } repo . ExpectFindAll ( rel . Joinf ( \"JOIN `books` ON `transactions`.`book_id`=`books`.`id`\" )). Result ( transactions ) Pessimistic Locking \u00b6 REL supports pessimistic locking by using mechanism provided by the underlying database. Lock can be only used only inside transaction. Retrieve and lock a row for update: Example var book Book err := repo . Find ( ctx , & book , where . Eq ( \"id\" , 1 ), rel . Lock ( \"FOR UPDATE\" )) Mock var book Book repo . ExpectFind ( where . Eq ( \"id\" , 1 ), rel . Lock ( \"FOR UPDATE\" )). Result ( book ) Retrieve and lock a row using predefined lock alias: Example var book Book err := repo . Find ( ctx , & book , where . Eq ( \"id\" , 1 ), rel . ForUpdate ()) Mock var book Book repo . ExpectFind ( where . Eq ( \"id\" , 1 ), rel . ForUpdate ()). Result ( book ) Retrieve and lock a row using chained query: Example var book Book err := repo . Find ( ctx , & book , rel . Where ( where . Eq ( \"id\" , 1 )). Lock ( \"FOR UPDATE\" )) Mock var book Book repo . ExpectFind ( rel . Where ( where . Eq ( \"id\" , 1 )). Lock ( \"FOR UPDATE\" )). Result ( book ) Aggregation \u00b6 REL provides a very basic Aggregate method which can be used to count, sum, max etc. Count all available books using aggregate: Example count , err := repo . Aggregate ( ctx , rel . From ( \"books\" ). Where ( where . Eq ( \"available\" , true )), \"count\" , \"id\" ) Mock repo . ExpectAggregate ( rel . From ( \"books\" ). Where ( where . Eq ( \"available\" , true )), \"count\" , \"id\" ). Result ( 5 ) Count all available books using count: Example count , err := repo . Count ( ctx , \"books\" ) Mock repo . ExpectCount ( \"books\" ). Result ( 7 ) Count all available books using count: Example count , err := repo . Count ( ctx , \"books\" , where . Eq ( \"available\" , true )) Mock repo . ExpectCount ( \"books\" , where . Eq ( \"available\" , true )). Result ( 5 ) Pagination \u00b6 REL provides a convenient FindAndCountAll methods that is useful for pagination, It's a combination of FindAll and Count method. FindAndCountAll returns count of records (ignoring limit and offset query) and an error. Retrieve all books within limit and offset and also count of all books: Example var books [] Book count , err := repo . FindAndCountAll ( ctx , & books , rel . Where ( where . Like ( \"title\" , \"%dummies%\" )). Limit ( 10 ). Offset ( 10 )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAndCountAll ( rel . Where ( where . Like ( \"title\" , \"%dummies%\" )). Limit ( 10 ). Offset ( 10 )). Result ( books , 12 ) Batch Iteration \u00b6 REL provides records iterator that can be use for perform batch processing of large amounts of records. Options: BatchSize - The size of batches (default 1000). Start - The primary value (ID) to start from (inclusive). Finish - The primary value (ID) to finish at (inclusive). Example var ( user User iter = repo . Iterate ( ctx , rel . From ( \"users\" ), rel . BatchSize ( 500 )) ) // make sure iterator is closed after process is finish. defer iter . Close () for { // retrieve next user. if err := iter . Next ( & user ); err != nil { if err == io . EOF { break } // handle error return err } // process user SendPromotionEmail ( & user ) } Mock users := make ([] User , 5 ) repo . ExpectIterate ( rel . From ( \"users\" ), rel . BatchSize ( 500 )). Result ( users ) Mock Error repo . ExpectIterate ( rel . From ( \"users\" ), rel . BatchSize ( 500 )). ConnectionClosed () Native SQL Query \u00b6 REL allows querying using native SQL query, this is especially useful when using complex query that cannot be covered with the query builder. Retrieve a book using native sql query: Example var book Book sql := rel . SQL ( \"SELECT id, title, price, orders = (SELECT COUNT(t.id) FROM [transactions] t WHERE t.book_id = b.id) FROM books b where b.id=?\" , 1 ) err := repo . Find ( ctx , & book , sql ) Mock var book Book sql := rel . SQL ( \"SELECT id, title, price, orders = (SELECT COUNT(t.id) FROM [transactions] t WHERE t.book_id = b.id) FROM books b where b.id=?\" , 1 ) repo . ExpectFind ( sql ). Result ( book )","title":"Queries"},{"location":"queries/#queries","text":"","title":"Queries"},{"location":"queries/#retrieving-data","text":"REL provides two basic finders method, Find for retrieving single record, and FindAll for retrieving multiple record. Note Find only accepts struct as the first argument, and always return the first result from the query. FindAll only accepts slice as the first argument, and always return all result from the query. Retrieve a book where id=1: Example var book Book err := repo . Find ( ctx , & book , where . Eq ( \"id\" , 1 )) Mock book := Book { ID : 1 , Title : \"REL for dummies\" } repo . ExpectFind ( where . Eq ( \"id\" , 1 )). Result ( book ) Retrieve all books: Example var books [] Book err := repo . FindAll ( ctx , & books ) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll (). Result ( books )","title":"Retrieving Data"},{"location":"queries/#conditions","text":"To retrieve filtered recods from database, you can use filter api to specify condition . For example, to filter all books that available, you can use rel.Eq in the query builder. Retrieve all available books using filter query: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . Eq ( \"available\" , true )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( rel . Eq ( \"available\" , true )). Result ( books ) Alias can be used to boost readability when dealing with short query: Example var books [] Book err := repo . FindAll ( ctx , & books , where . Eq ( \"available\" , true )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( where . Eq ( \"available\" , true )). Result ( books ) Use fragment to specify custom SQL query: Example var books [] Book err := repo . FindAll ( ctx , & books , where . Fragment ( \"available=?\" , true )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( where . Fragment ( \"available=?\" , true )). Result ( books ) You can use rel.And or rel.Or to specify more conditions. Retrieve all available books where price is at least 100 or in discount using filter query: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . And ( rel . Eq ( \"available\" , true ), rel . Or ( rel . Gte ( \"price\" , 100 ), rel . Eq ( \"discount\" , true )))) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , Price : 100 }, { ID : 2 , Title : \"REL for dummies\" , Price : 50 , Discount : true }, } repo . ExpectFindAll ( rel . And ( rel . Eq ( \"available\" , true ), rel . Or ( rel . Gte ( \"price\" , 100 ), rel . Eq ( \"discount\" , true )))). Result ( books ) Retrieve all available books where price is at least 100 or in discount using chained filter query: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . Eq ( \"available\" , true ). And ( rel . Gte ( \"price\" , 100 ). OrEq ( \"discount\" , true ))) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , Price : 100 }, { ID : 2 , Title : \"REL for dummies\" , Price : 50 , Discount : true }, } repo . ExpectFindAll ( rel . Eq ( \"available\" , true ). And ( rel . Gte ( \"price\" , 100 ). OrEq ( \"discount\" , true ))). Result ( books ) Retrieve all available books where price is at least 100 or in discount using alias ( github.com/go-rel/rel/where ): Example var books [] Book err := repo . FindAll ( ctx , & books , where . Eq ( \"available\" , true ). And ( where . Gte ( \"price\" , 100 ). OrEq ( \"discount\" , true ))) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , Price : 100 }, { ID : 2 , Title : \"REL for dummies\" , Price : 50 , Discount : true }, } repo . ExpectFindAll ( where . Eq ( \"available\" , true ). And ( where . Gte ( \"price\" , 100 ). OrEq ( \"discount\" , true ))). Result ( books )","title":"Conditions"},{"location":"queries/#subquery","text":"Subquery is supported in condition clause, you can pass any query to the where/having parameter. Retrieve all books that is cheaper than average book price: Example var books [] Book err := repo . FindAll ( ctx , & books , where . Lt ( \"price\" , rel . Select ( \"AVG(price)\" ). From ( \"books\" ))) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , Price : 100 }, { ID : 2 , Title : \"REL for dummies\" , Price : 50 , Discount : true }, } repo . ExpectFindAll ( where . Lt ( \"price\" , rel . Select ( \"AVG(price)\" ). From ( \"books\" ))). Result ( books )","title":"Subquery"},{"location":"queries/#sorting","text":"To retrieve records from database in a specific order, you can use the sort api. Sort books ascending by updated_at field: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . NewSortAsc ( \"updated_at\" )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , UpdatedAt : time . Now ()}, } repo . ExpectFindAll ( rel . NewSortAsc ( \"updated_at\" )). Result ( books ) Using alias if you need more syntactic sugar: Example var books [] Book err := repo . FindAll ( ctx , & books , sort . Asc ( \"updated_at\" )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , UpdatedAt : time . Now ()}, } repo . ExpectFindAll ( sort . Asc ( \"updated_at\" )). Result ( books ) Combining with other query is fairly easy. Chain where and sort using query builder: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . Where ( where . Eq ( \"available\" , true )). SortAsc ( \"updated_at\" )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , UpdatedAt : time . Now ()}, } repo . ExpectFindAll ( rel . Where ( where . Eq ( \"available\" , true )). SortAsc ( \"updated_at\" )). Result ( books ) It's also possible to use variadic arguments to combine multiple queries: Example var books [] Book err := repo . FindAll ( ctx , & books , where . Eq ( \"available\" , true ), sort . Asc ( \"updated_at\" )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" , UpdatedAt : time . Now ()}, } repo . ExpectFindAll ( where . Eq ( \"available\" , true ), sort . Asc ( \"updated_at\" )). Result ( books )","title":"Sorting"},{"location":"queries/#selecting-specific-fields","text":"To select specific fields, you can use Select method, this way only specificied field will be mapped to books. Note Specifying select without argument ( rel.Select() ) will automatically load all fields. This is helpful when used as query builder entry point (compared to using rel.From ), because you can let REL to infer the table name. Load only id and title: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . Select ( \"id\" , \"title\" )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( rel . Select ( \"id\" , \"title\" )). Result ( books )","title":"Selecting Specific Fields"},{"location":"queries/#using-specific-table","text":"By default, REL will use pluralized-snakecase struct name as the table name. To select from specific table, you can use From method. Load from ebooks table: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . From ( \"ebooks\" )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( rel . From ( \"ebooks\" )). Result ( books ) Chain the query with select: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . Select ( \"id\" , \"title\" ). From ( \"ebooks\" )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( rel . Select ( \"id\" , \"title\" ). From ( \"ebooks\" )). Result ( books )","title":"Using Specific Table"},{"location":"queries/#limit-and-offset","text":"To set the limit and offset of query, use Limit and Offset api. Offset will be ignored if Limit is not specified. Specify limit and offset: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . Limit ( 10 ), rel . Offset ( 20 )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( rel . Limit ( 10 ), rel . Offset ( 20 )). Result ( books ) As a chainable api: Example var books [] Book err := repo . FindAll ( ctx , & books , rel . Select (). Limit ( 10 ). Offset ( 20 )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAll ( rel . Select (). Limit ( 10 ). Offset ( 20 )). Result ( books )","title":"Limit and Offset"},{"location":"queries/#group","text":"To use group by query, you can use Group method. Retrieve count of books for every category: Example // custom struct to store the result. var results [] struct { Category string Total int } // we need to explicitly specify table name since we are using an anonymous struct. err := repo . FindAll ( ctx , & results , rel . Select ( \"category\" , \"COUNT(id) as total\" ). From ( \"books\" ). Group ( \"category\" )) Mock results := [] struct { Category string Total int }{ { Category : \"education\" , Total : 100 }, } repo . ExpectFindAll ( rel . Select ( \"category\" , \"COUNT(id) as total\" ). From ( \"books\" ). Group ( \"category\" )). Result ( results )","title":"Group"},{"location":"queries/#joining-tables","text":"To join tables, you can use join api. Note Joining table won't automatically load the association to struct. If you want to load association on a struct, try JoinAssoc or better use preload instead. Join transaction and book table, then filter only transaction that have specified book name. This methods assumes belongs to relation, which means it'll try to join using transactions.book_id=books.id : Example var transactions [] Transaction err := repo . FindAll ( ctx , & transactions , rel . Join ( \"books\" ). Where ( where . Eq ( \"books.name\" , \"REL for Dummies\" ))) Mock transactions := [] Transaction { { ID : 1 , Status : \"paid\" }, } repo . ExpectFindAll ( rel . Join ( \"books\" ). Where ( where . Eq ( \"books.name\" , \"REL for Dummies\" ))). Result ( transactions ) Specifying which column to join using JoinOn: Example var transactions [] Transaction err := repo . FindAll ( ctx , & transactions , rel . JoinOn ( \"books\" , \"transactions.book_id\" , \"books.id\" )) Mock transactions := [] Transaction { { ID : 1 , Status : \"paid\" }, } repo . ExpectFindAll ( rel . JoinOn ( \"books\" , \"transactions.book_id\" , \"books.id\" )). Result ( transactions ) Syntactic sugar also available for join: Example var transactions [] Transaction err := repo . FindAll ( ctx , & transactions , join . On ( \"books\" , \"transactions.book_id\" , \"books.id\" )) Mock transactions := [] Transaction { { ID : 1 , Status : \"paid\" }, } repo . ExpectFindAll ( join . On ( \"books\" , \"transactions.book_id\" , \"books.id\" )). Result ( transactions ) Joining table with custom join mode: Example var transactions [] Transaction err := repo . FindAll ( ctx , & transactions , rel . JoinWith ( \"LEFT JOIN\" , \"books\" , \"transactions.book_id\" , \"books.id\" )) Mock transactions := [] Transaction { { ID : 1 , Status : \"paid\" }, } repo . ExpectFindAll ( rel . JoinWith ( \"LEFT JOIN\" , \"books\" , \"transactions.book_id\" , \"books.id\" )). Result ( transactions ) Use fragment for more complex join query: Example var transactions [] Transaction err := repo . FindAll ( ctx , & transactions , rel . Joinf ( \"JOIN `books` ON `transactions`.`book_id`=`books`.`id`\" )) Mock transactions := [] Transaction { { ID : 1 , Status : \"paid\" }, } repo . ExpectFindAll ( rel . Joinf ( \"JOIN `books` ON `transactions`.`book_id`=`books`.`id`\" )). Result ( transactions )","title":"Joining Tables"},{"location":"queries/#pessimistic-locking","text":"REL supports pessimistic locking by using mechanism provided by the underlying database. Lock can be only used only inside transaction. Retrieve and lock a row for update: Example var book Book err := repo . Find ( ctx , & book , where . Eq ( \"id\" , 1 ), rel . Lock ( \"FOR UPDATE\" )) Mock var book Book repo . ExpectFind ( where . Eq ( \"id\" , 1 ), rel . Lock ( \"FOR UPDATE\" )). Result ( book ) Retrieve and lock a row using predefined lock alias: Example var book Book err := repo . Find ( ctx , & book , where . Eq ( \"id\" , 1 ), rel . ForUpdate ()) Mock var book Book repo . ExpectFind ( where . Eq ( \"id\" , 1 ), rel . ForUpdate ()). Result ( book ) Retrieve and lock a row using chained query: Example var book Book err := repo . Find ( ctx , & book , rel . Where ( where . Eq ( \"id\" , 1 )). Lock ( \"FOR UPDATE\" )) Mock var book Book repo . ExpectFind ( rel . Where ( where . Eq ( \"id\" , 1 )). Lock ( \"FOR UPDATE\" )). Result ( book )","title":"Pessimistic Locking"},{"location":"queries/#aggregation","text":"REL provides a very basic Aggregate method which can be used to count, sum, max etc. Count all available books using aggregate: Example count , err := repo . Aggregate ( ctx , rel . From ( \"books\" ). Where ( where . Eq ( \"available\" , true )), \"count\" , \"id\" ) Mock repo . ExpectAggregate ( rel . From ( \"books\" ). Where ( where . Eq ( \"available\" , true )), \"count\" , \"id\" ). Result ( 5 ) Count all available books using count: Example count , err := repo . Count ( ctx , \"books\" ) Mock repo . ExpectCount ( \"books\" ). Result ( 7 ) Count all available books using count: Example count , err := repo . Count ( ctx , \"books\" , where . Eq ( \"available\" , true )) Mock repo . ExpectCount ( \"books\" , where . Eq ( \"available\" , true )). Result ( 5 )","title":"Aggregation"},{"location":"queries/#pagination","text":"REL provides a convenient FindAndCountAll methods that is useful for pagination, It's a combination of FindAll and Count method. FindAndCountAll returns count of records (ignoring limit and offset query) and an error. Retrieve all books within limit and offset and also count of all books: Example var books [] Book count , err := repo . FindAndCountAll ( ctx , & books , rel . Where ( where . Like ( \"title\" , \"%dummies%\" )). Limit ( 10 ). Offset ( 10 )) Mock books := [] Book { { ID : 1 , Title : \"REL for dummies\" }, } repo . ExpectFindAndCountAll ( rel . Where ( where . Like ( \"title\" , \"%dummies%\" )). Limit ( 10 ). Offset ( 10 )). Result ( books , 12 )","title":"Pagination"},{"location":"queries/#batch-iteration","text":"REL provides records iterator that can be use for perform batch processing of large amounts of records. Options: BatchSize - The size of batches (default 1000). Start - The primary value (ID) to start from (inclusive). Finish - The primary value (ID) to finish at (inclusive). Example var ( user User iter = repo . Iterate ( ctx , rel . From ( \"users\" ), rel . BatchSize ( 500 )) ) // make sure iterator is closed after process is finish. defer iter . Close () for { // retrieve next user. if err := iter . Next ( & user ); err != nil { if err == io . EOF { break } // handle error return err } // process user SendPromotionEmail ( & user ) } Mock users := make ([] User , 5 ) repo . ExpectIterate ( rel . From ( \"users\" ), rel . BatchSize ( 500 )). Result ( users ) Mock Error repo . ExpectIterate ( rel . From ( \"users\" ), rel . BatchSize ( 500 )). ConnectionClosed ()","title":"Batch Iteration"},{"location":"queries/#native-sql-query","text":"REL allows querying using native SQL query, this is especially useful when using complex query that cannot be covered with the query builder. Retrieve a book using native sql query: Example var book Book sql := rel . SQL ( \"SELECT id, title, price, orders = (SELECT COUNT(t.id) FROM [transactions] t WHERE t.book_id = b.id) FROM books b where b.id=?\" , 1 ) err := repo . Find ( ctx , & book , sql ) Mock var book Book sql := rel . SQL ( \"SELECT id, title, price, orders = (SELECT COUNT(t.id) FROM [transactions] t WHERE t.book_id = b.id) FROM books b where b.id=?\" , 1 ) repo . ExpectFind ( sql ). Result ( book )","title":"Native SQL Query"},{"location":"transactions/","text":"Transactions \u00b6 To declare a transaction, use the Transaction method which can be called recursively to define nested transactions. Rel accepts a function with context.Context argument that is used to determine the transaction scope. Context makes it easier to call any function that involves db operation inside a transaction, because the scope of transaction is automatically passed by context. If any error occured within transaction, the transaction will be rolled back, and returns the error. If the error is a runtime error or panic with string argument, it'll panic after rollback. Example err := repo . Transaction ( ctx , func ( ctx context . Context ) error { repo . Update ( ctx , & book , rel . Dec ( \"stock\" )) // Any database calls inside other function will be using the same transaction as long as it share the same context. Process ( ctx , transaction ) // Nested transaction repo . Transaction ( ctx , func ( ctx context . Context ) error { repo . UpdateAny ( ctx , rel . From ( \"authors\" ). Where ( where . Eq ( \"id\" , book . AuthorID )), rel . Inc ( \"popularity\" )) repo . UpdateAny ( ctx , rel . From ( \"publishers\" ). Where ( where . Eq ( \"name\" , book . Publisher )), rel . Inc ( \"popularity\" )) return nil }) return repo . Update ( ctx , & transaction , rel . Set ( \"status\" , \"paid\" )) }) Mock repo . ExpectTransaction ( func ( repo * reltest . Repository ) { repo . ExpectUpdate ( rel . Dec ( \"stock\" )). ForType ( \"main.Book\" ) // mock process repo . ExpectTransaction ( func ( r * reltest . Repository ) { repo . ExpectUpdateAny ( rel . From ( \"authors\" ). Where ( where . Eq ( \"id\" , 0 )), rel . Inc ( \"popularity\" )) repo . ExpectUpdateAny ( rel . From ( \"publishers\" ). Where ( where . Eq ( \"name\" , \"\" )), rel . Inc ( \"popularity\" )) }) repo . ExpectUpdate ( rel . Set ( \"status\" , \"paid\" )). ForType ( \"main.Transaction\" ) })","title":"Transactions"},{"location":"transactions/#transactions","text":"To declare a transaction, use the Transaction method which can be called recursively to define nested transactions. Rel accepts a function with context.Context argument that is used to determine the transaction scope. Context makes it easier to call any function that involves db operation inside a transaction, because the scope of transaction is automatically passed by context. If any error occured within transaction, the transaction will be rolled back, and returns the error. If the error is a runtime error or panic with string argument, it'll panic after rollback. Example err := repo . Transaction ( ctx , func ( ctx context . Context ) error { repo . Update ( ctx , & book , rel . Dec ( \"stock\" )) // Any database calls inside other function will be using the same transaction as long as it share the same context. Process ( ctx , transaction ) // Nested transaction repo . Transaction ( ctx , func ( ctx context . Context ) error { repo . UpdateAny ( ctx , rel . From ( \"authors\" ). Where ( where . Eq ( \"id\" , book . AuthorID )), rel . Inc ( \"popularity\" )) repo . UpdateAny ( ctx , rel . From ( \"publishers\" ). Where ( where . Eq ( \"name\" , book . Publisher )), rel . Inc ( \"popularity\" )) return nil }) return repo . Update ( ctx , & transaction , rel . Set ( \"status\" , \"paid\" )) }) Mock repo . ExpectTransaction ( func ( repo * reltest . Repository ) { repo . ExpectUpdate ( rel . Dec ( \"stock\" )). ForType ( \"main.Book\" ) // mock process repo . ExpectTransaction ( func ( r * reltest . Repository ) { repo . ExpectUpdateAny ( rel . From ( \"authors\" ). Where ( where . Eq ( \"id\" , 0 )), rel . Inc ( \"popularity\" )) repo . ExpectUpdateAny ( rel . From ( \"publishers\" ). Where ( where . Eq ( \"name\" , \"\" )), rel . Inc ( \"popularity\" )) }) repo . ExpectUpdate ( rel . Set ( \"status\" , \"paid\" )). ForType ( \"main.Transaction\" ) })","title":"Transactions"},{"location":"changelog/release-notes/","text":"Release Notes \u00b6 v0.39.0 - October 23, 2022 \u00b6 Add query args to instrumentation ( #314 ) Bump github.com/subosito/gotenv from 1.4.0 to 1.4.1 ( #309 ) Extract cmd package ( #319 ) Generic type Repository wrapper ( #318 ) Replace empty interface with any ( #315 ) Set min go version to 1.15 and fix build matrix ( #316 ) Update go.mod and workflows to use go 1.19 ( #313 ) v0.38.0 - July 8, 2022 \u00b6 Changelog \u00b6 36bf6b0 Allow named structs to be embedded ( #303 ) v0.37.0 - July 3, 2022 \u00b6 Add join assoc query builder ( #298 ) Auto populate join fields ( #292 ) Bump github.com/stretchr/testify from 1.7.4 to 1.7.5 ( #297 ) Bump github.com/stretchr/testify from 1.7.5 to 1.8.0 ( #299 ) Support loading association using Join query ( #302 ) v0.36.0 - June 22, 2022 \u00b6 Add support for scanning joined assoc ( #290 ) Bump github.com/stretchr/testify from 1.7.1 to 1.7.2 ( #291 ) Bump github.com/stretchr/testify from 1.7.2 to 1.7.4 ( #294 ) Bump github.com/subosito/gotenv from 1.3.0 to 1.4.0 ( #288 ) Migration's Do takes a context as its first argument ( #295 ) v0.35.0 - May 29, 2022 \u00b6 Split big preloading-IN query into multiple queries ( #283 ) ( #285 ) v0.34.1 - May 26, 2022 \u00b6 Add Iris Example ( #282 ) Bump github.com/subosito/gotenv from 1.2.0 to 1.3.0 ( #284 ) Fix Unhandled exception in gopkg.in/yaml.v3 ( #286 ) v0.34.0 - March 25, 2022 \u00b6 Bump github.com/stretchr/testify from 1.7.0 to 1.7.1 ( #273 ) Optimistic locking ( #265 ) Refactor optimistic lock api and test ( #276 ) v0.33.1 - March 12, 2022 \u00b6 Fix dependencies ( #270 ) v0.33.0 - March 12, 2022 \u00b6 Basic support for insert with on conflict ( #269 ) Deprecate migrator package ( #267 ) v0.32.0 - February 20, 2022 \u00b6 :boom: Remove deprecated reltest package ( #266 ) Bump github.com/go-rel/reltest from 0.5.0 to 0.6.0 ( #264 ) v0.31.0 - February 15, 2022 \u00b6 Bump github.com/go-rel/reltest from 0.4.0 to 0.5.0 ( #259 ) Setup codeql analysis ( #263 ) Support embeddable structs ( #262 ) v0.30.0 - November 14, 2021 \u00b6 :boom: Remove builtin base sql adapter ( #258 ) :boom: Remove builtin mysql adapter ( #256 ) :boom: Remove builtin postgres adapter ( #255 ) :boom: Remove builtin sqlite3 adapter ( #257 ) Bump github.com/lib/pq from 1.10.3 to 1.10.4 ( #254 ) v0.29.2 - November 8, 2021 \u00b6 Fix Structset to handle uuid ([16]byte) correctly ( #253 ) v0.29.1 - November 5, 2021 \u00b6 Correctly handle nil values in arrays ( #251 ) Fix panics when array ptr is used for InsertAll and DeleteAll ( #250 ) v0.29.0 - November 5, 2021 \u00b6 Fix to find records to collection of pointer type ( #246 ) Fix typo in comments ( #248 ) Implement option to specify any column as primary key ( #247 ) Test migrator using new reltest package ( #243 ) v0.28.0 - October 29, 2021 \u00b6 Add .deepsource.toml ( #237 ) Add filter conditions for Join helpers ( #239 ) Add support for primary-replica connections ( #238 ) Replace bytes.Compare with bytes.Equal ( #236 ) v0.27.0 - October 20, 2021 \u00b6 Add option to specify addtional filters for joins ( #234 ) v0.26.1 - October 19, 2021 \u00b6 Add workflow to bump patch version ( #232 ) Bump github.com/mattn/go-sqlite3 from 1.14.8 to 1.14.9 ( #230 ) Fix find and count all for soft deleteable records ( #231 ) v0.26.0 - October 13, 2021 \u00b6 Add alternative soft delete scheme ( #225 ) Add option to define JSON datatype column ( #223 ) Add partial unique index for specs ( #221 ) Allow FilterQuery to be specified for partial indexes and unique key constraints ( #219 ) Remove Filter for key as it is not directly supported by SQL ( #220 ) v0.25.0 - September 27, 2021 \u00b6 Add deprecation notices in constructors ( #214 ) Deprecate builtin mysql package ( #211 ) Deprecate builtin sqlite3 package ( #212 ) Fix preload ptr field with custom table ( #216 ) v0.24.0 - September 25, 2021 \u00b6 Add Close() error to Adapter interface ( #209 ) Deprecate reltest ( #208 ) Fix bump-minor workflow ( #210 ) v0.23.0 - September 13, 2021 \u00b6 Deprecate NewSelect for Select ( #205 ) Deprecate NewSortAsc/Desc for SortAsc/Desc ( #204 ) Implement Map.String() ( #206 ) v0.22.0 - September 7, 2021 \u00b6 Add doc to use clientFoundRows=true to mysql adapter ( #202 ) Allow the function that returns the time to be replaced ( #201 ) Bump github.com/lib/pq from 1.10.2 to 1.10.3 ( #203 ) v0.21.0 - August 25, 2021 \u00b6 Set pointer association fields to nil if preload fails ( #197 ) Fix merge sorts query ( #195 ) Fix string of empty query ( #196 ) If the preload fails, the intermediate association fields will also remain nil ( #198 ) v0.20.0 - August 19, 2021 \u00b6 Fix Merge sort query ( #189 ) Fix deleting empty has many ( #191 ) Support stringer interface on query and mutator ( #194 ) v0.19.0 - August 14, 2021 \u00b6 Support NotFoundError is sql.ErrNoRows ( #188 ) v0.18.0 - August 7, 2021 \u00b6 Bump github.com/go-sql-driver/mysql from 1.5.0 to 1.6.0 ( #177 ) Bump github.com/lib/pq from 1.9.0 to 1.10.2 ( #178 ) Bump github.com/mattn/go-sqlite3 from 1.14.6 to 1.14.8 ( #179 ) Fix setting tag auto: true panics in reltest ( #183 ) Improve preload doc ( #180 ) Setup homebrew tap ( #181 ) v0.17.0 - July 2, 2021 \u00b6 \ud83d\udca5 Rename DeleteAll to DeleteAny ( #172 ) \ud83d\udca5 Rename MutateAll to MutateAny ( #174 ) \ud83d\udca5 Rename UpdateAll to UpdateAny ( #171 ) Add DeleteAll records ( #173 ) v0.16.0 - June 23, 2021 \u00b6 Allow to insert association with predefined primary keys ( #168 ) v0.15.0 - June 16, 2021 \u00b6 Update association only if primary and foreign keys are set ( #167 )","title":"Release Notes"},{"location":"changelog/release-notes/#release-notes","text":"","title":"Release Notes"},{"location":"changelog/release-notes/#v0390---october-23-2022","text":"Add query args to instrumentation ( #314 ) Bump github.com/subosito/gotenv from 1.4.0 to 1.4.1 ( #309 ) Extract cmd package ( #319 ) Generic type Repository wrapper ( #318 ) Replace empty interface with any ( #315 ) Set min go version to 1.15 and fix build matrix ( #316 ) Update go.mod and workflows to use go 1.19 ( #313 )","title":"v0.39.0 - October 23, 2022"},{"location":"changelog/release-notes/#v0380---july-8-2022","text":"","title":"v0.38.0 - July 8, 2022"},{"location":"changelog/release-notes/#changelog","text":"36bf6b0 Allow named structs to be embedded ( #303 )","title":"Changelog"},{"location":"changelog/release-notes/#v0370---july-3-2022","text":"Add join assoc query builder ( #298 ) Auto populate join fields ( #292 ) Bump github.com/stretchr/testify from 1.7.4 to 1.7.5 ( #297 ) Bump github.com/stretchr/testify from 1.7.5 to 1.8.0 ( #299 ) Support loading association using Join query ( #302 )","title":"v0.37.0 - July 3, 2022"},{"location":"changelog/release-notes/#v0360---june-22-2022","text":"Add support for scanning joined assoc ( #290 ) Bump github.com/stretchr/testify from 1.7.1 to 1.7.2 ( #291 ) Bump github.com/stretchr/testify from 1.7.2 to 1.7.4 ( #294 ) Bump github.com/subosito/gotenv from 1.3.0 to 1.4.0 ( #288 ) Migration's Do takes a context as its first argument ( #295 )","title":"v0.36.0 - June 22, 2022"},{"location":"changelog/release-notes/#v0350---may-29-2022","text":"Split big preloading-IN query into multiple queries ( #283 ) ( #285 )","title":"v0.35.0 - May 29, 2022"},{"location":"changelog/release-notes/#v0341---may-26-2022","text":"Add Iris Example ( #282 ) Bump github.com/subosito/gotenv from 1.2.0 to 1.3.0 ( #284 ) Fix Unhandled exception in gopkg.in/yaml.v3 ( #286 )","title":"v0.34.1 - May 26, 2022"},{"location":"changelog/release-notes/#v0340---march-25-2022","text":"Bump github.com/stretchr/testify from 1.7.0 to 1.7.1 ( #273 ) Optimistic locking ( #265 ) Refactor optimistic lock api and test ( #276 )","title":"v0.34.0 - March 25, 2022"},{"location":"changelog/release-notes/#v0331---march-12-2022","text":"Fix dependencies ( #270 )","title":"v0.33.1 - March 12, 2022"},{"location":"changelog/release-notes/#v0330---march-12-2022","text":"Basic support for insert with on conflict ( #269 ) Deprecate migrator package ( #267 )","title":"v0.33.0 - March 12, 2022"},{"location":"changelog/release-notes/#v0320---february-20-2022","text":":boom: Remove deprecated reltest package ( #266 ) Bump github.com/go-rel/reltest from 0.5.0 to 0.6.0 ( #264 )","title":"v0.32.0 - February 20, 2022"},{"location":"changelog/release-notes/#v0310---february-15-2022","text":"Bump github.com/go-rel/reltest from 0.4.0 to 0.5.0 ( #259 ) Setup codeql analysis ( #263 ) Support embeddable structs ( #262 )","title":"v0.31.0 - February 15, 2022"},{"location":"changelog/release-notes/#v0300---november-14-2021","text":":boom: Remove builtin base sql adapter ( #258 ) :boom: Remove builtin mysql adapter ( #256 ) :boom: Remove builtin postgres adapter ( #255 ) :boom: Remove builtin sqlite3 adapter ( #257 ) Bump github.com/lib/pq from 1.10.3 to 1.10.4 ( #254 )","title":"v0.30.0 - November 14, 2021"},{"location":"changelog/release-notes/#v0292---november-8-2021","text":"Fix Structset to handle uuid ([16]byte) correctly ( #253 )","title":"v0.29.2 - November 8, 2021"},{"location":"changelog/release-notes/#v0291---november-5-2021","text":"Correctly handle nil values in arrays ( #251 ) Fix panics when array ptr is used for InsertAll and DeleteAll ( #250 )","title":"v0.29.1 - November 5, 2021"},{"location":"changelog/release-notes/#v0290---november-5-2021","text":"Fix to find records to collection of pointer type ( #246 ) Fix typo in comments ( #248 ) Implement option to specify any column as primary key ( #247 ) Test migrator using new reltest package ( #243 )","title":"v0.29.0 - November 5, 2021"},{"location":"changelog/release-notes/#v0280---october-29-2021","text":"Add .deepsource.toml ( #237 ) Add filter conditions for Join helpers ( #239 ) Add support for primary-replica connections ( #238 ) Replace bytes.Compare with bytes.Equal ( #236 )","title":"v0.28.0 - October 29, 2021"},{"location":"changelog/release-notes/#v0270---october-20-2021","text":"Add option to specify addtional filters for joins ( #234 )","title":"v0.27.0 - October 20, 2021"},{"location":"changelog/release-notes/#v0261---october-19-2021","text":"Add workflow to bump patch version ( #232 ) Bump github.com/mattn/go-sqlite3 from 1.14.8 to 1.14.9 ( #230 ) Fix find and count all for soft deleteable records ( #231 )","title":"v0.26.1 - October 19, 2021"},{"location":"changelog/release-notes/#v0260---october-13-2021","text":"Add alternative soft delete scheme ( #225 ) Add option to define JSON datatype column ( #223 ) Add partial unique index for specs ( #221 ) Allow FilterQuery to be specified for partial indexes and unique key constraints ( #219 ) Remove Filter for key as it is not directly supported by SQL ( #220 )","title":"v0.26.0 - October 13, 2021"},{"location":"changelog/release-notes/#v0250---september-27-2021","text":"Add deprecation notices in constructors ( #214 ) Deprecate builtin mysql package ( #211 ) Deprecate builtin sqlite3 package ( #212 ) Fix preload ptr field with custom table ( #216 )","title":"v0.25.0 - September 27, 2021"},{"location":"changelog/release-notes/#v0240---september-25-2021","text":"Add Close() error to Adapter interface ( #209 ) Deprecate reltest ( #208 ) Fix bump-minor workflow ( #210 )","title":"v0.24.0 - September 25, 2021"},{"location":"changelog/release-notes/#v0230---september-13-2021","text":"Deprecate NewSelect for Select ( #205 ) Deprecate NewSortAsc/Desc for SortAsc/Desc ( #204 ) Implement Map.String() ( #206 )","title":"v0.23.0 - September 13, 2021"},{"location":"changelog/release-notes/#v0220---september-7-2021","text":"Add doc to use clientFoundRows=true to mysql adapter ( #202 ) Allow the function that returns the time to be replaced ( #201 ) Bump github.com/lib/pq from 1.10.2 to 1.10.3 ( #203 )","title":"v0.22.0 - September 7, 2021"},{"location":"changelog/release-notes/#v0210---august-25-2021","text":"Set pointer association fields to nil if preload fails ( #197 ) Fix merge sorts query ( #195 ) Fix string of empty query ( #196 ) If the preload fails, the intermediate association fields will also remain nil ( #198 )","title":"v0.21.0 - August 25, 2021"},{"location":"changelog/release-notes/#v0200---august-19-2021","text":"Fix Merge sort query ( #189 ) Fix deleting empty has many ( #191 ) Support stringer interface on query and mutator ( #194 )","title":"v0.20.0 - August 19, 2021"},{"location":"changelog/release-notes/#v0190---august-14-2021","text":"Support NotFoundError is sql.ErrNoRows ( #188 )","title":"v0.19.0 - August 14, 2021"},{"location":"changelog/release-notes/#v0180---august-7-2021","text":"Bump github.com/go-sql-driver/mysql from 1.5.0 to 1.6.0 ( #177 ) Bump github.com/lib/pq from 1.9.0 to 1.10.2 ( #178 ) Bump github.com/mattn/go-sqlite3 from 1.14.6 to 1.14.8 ( #179 ) Fix setting tag auto: true panics in reltest ( #183 ) Improve preload doc ( #180 ) Setup homebrew tap ( #181 )","title":"v0.18.0 - August 7, 2021"},{"location":"changelog/release-notes/#v0170---july-2-2021","text":"\ud83d\udca5 Rename DeleteAll to DeleteAny ( #172 ) \ud83d\udca5 Rename MutateAll to MutateAny ( #174 ) \ud83d\udca5 Rename UpdateAll to UpdateAny ( #171 ) Add DeleteAll records ( #173 )","title":"v0.17.0 - July 2, 2021"},{"location":"changelog/release-notes/#v0160---june-23-2021","text":"Allow to insert association with predefined primary keys ( #168 )","title":"v0.16.0 - June 23, 2021"},{"location":"changelog/release-notes/#v0150---june-16-2021","text":"Update association only if primary and foreign keys are set ( #167 )","title":"v0.15.0 - June 16, 2021"},{"location":"changelog/upgrading/","text":"Upgrading \u00b6 Upgrading from 0.32.x to 0.33.x \u00b6 Rel v0.33.x adds rel.OnConflict mutator that requires adapter interface changes. because of that, when upgrading to this version, other Rel packages need to be upgraded at the same time as well . Upgrading from 0.31.x to 0.32.x \u00b6 Import Path \u00b6 Builtin github.com/go-rel/rel/reltest adapter has been refactored to github.com/go-rel/reltest . 0.31.x import \"github.com/go-rel/rel/reltest\" 0.32.x import \"github.com/go-rel/rel\" Upgrading from 0.29.x to 0.30.x \u00b6 SQLite3 Adapter \u00b6 Builtin github.com/go-rel/rel/adapter/sqlite3 adapter has been extracted to github.com/go-rel/sqlite3 . 0.29.x import \"github.com/go-rel/rel/adapter/sqlite3\" 0.30.x import \"github.com/go-rel/sqlite3\" MySQL Adapter \u00b6 Builtin github.com/go-rel/rel/adapter/mysql adapter has been extracted to github.com/go-rel/mysql . 0.29.x import \"github.com/go-rel/rel/adapter/mysql\" 0.30.x import \"github.com/go-rel/mysql\" Postgres Adapter \u00b6 Builtin github.com/go-rel/rel/adapter/postgres adapter has been extracted to github.com/go-rel/postgres . 0.29.x import \"github.com/go-rel/rel/adapter/postgres\" 0.30.x import \"github.com/go-rel/postgres\" Upgrading from 0.16.x to 0.17.x \u00b6 UpdateAll and DeleteAll \u00b6 UpdateAll and DeleteAll now renamed to UpdateAny and DeleteAny respectively. 0.16.x // UpdateAll err := repo . UpdateAll ( ctx , query , Set ( \"notes\" , \"notes\" )) // DeleteAll err := repo . DeleteAll ( ctx , query ) 0.17.x // UpdateAny updatedCount , err := repo . UpdateAny ( ctx , query , Set ( \"notes\" , \"notes\" )) // DeleteAny deletedCount , err := repo . DeleteAny ( ctx , query ) Upgrading from 0.13.x to 0.14.x \u00b6 UpdateAll and DeleteAll \u00b6 UpdateAll and DeleteAll function now returns affected rows instead of just error. 0.13.x // UpdateAll err := repo . UpdateAll ( ctx , query , Set ( \"notes\" , \"notes\" )) // DeleteAll err := repo . DeleteAll ( ctx , query ) 0.14.x // UpdateAll updatedCount , err := repo . UpdateAll ( ctx , query , Set ( \"notes\" , \"notes\" )) // DeleteAll deletedCount , err := repo . DeleteAll ( ctx , query ) Upgrading from 0.8.x to 0.9.x \u00b6 Association Definition \u00b6 Before 0.9.x all association is saved as is when its parent is modified, after this PR ( !127 ) this feature needs to be explicitly enabled. 0.8.x // User schema. type User struct { ID int Name string Address Address } 0.9.x // User schema. type User struct { ID int Name string Address Address `autosave:\"true\"` } Upgrading from 0.7.x to 0.8.x \u00b6 Import Path \u00b6 REL is migrated to a new github organization and all import path need to be moved from Fs02 to go-rel 0.7.x import github . com / Fs02 / rel 0.8.x import github . com / go - rel / rel","title":"Upgrading"},{"location":"changelog/upgrading/#upgrading","text":"","title":"Upgrading"},{"location":"changelog/upgrading/#upgrading-from-032x-to-033x","text":"Rel v0.33.x adds rel.OnConflict mutator that requires adapter interface changes. because of that, when upgrading to this version, other Rel packages need to be upgraded at the same time as well .","title":"Upgrading from 0.32.x to 0.33.x"},{"location":"changelog/upgrading/#upgrading-from-031x-to-032x","text":"","title":"Upgrading from 0.31.x to 0.32.x"},{"location":"changelog/upgrading/#import-path","text":"Builtin github.com/go-rel/rel/reltest adapter has been refactored to github.com/go-rel/reltest . 0.31.x import \"github.com/go-rel/rel/reltest\" 0.32.x import \"github.com/go-rel/rel\"","title":"Import Path"},{"location":"changelog/upgrading/#upgrading-from-029x-to-030x","text":"","title":"Upgrading from 0.29.x to 0.30.x"},{"location":"changelog/upgrading/#sqlite3-adapter","text":"Builtin github.com/go-rel/rel/adapter/sqlite3 adapter has been extracted to github.com/go-rel/sqlite3 . 0.29.x import \"github.com/go-rel/rel/adapter/sqlite3\" 0.30.x import \"github.com/go-rel/sqlite3\"","title":"SQLite3 Adapter"},{"location":"changelog/upgrading/#mysql-adapter","text":"Builtin github.com/go-rel/rel/adapter/mysql adapter has been extracted to github.com/go-rel/mysql . 0.29.x import \"github.com/go-rel/rel/adapter/mysql\" 0.30.x import \"github.com/go-rel/mysql\"","title":"MySQL Adapter"},{"location":"changelog/upgrading/#postgres-adapter","text":"Builtin github.com/go-rel/rel/adapter/postgres adapter has been extracted to github.com/go-rel/postgres . 0.29.x import \"github.com/go-rel/rel/adapter/postgres\" 0.30.x import \"github.com/go-rel/postgres\"","title":"Postgres Adapter"},{"location":"changelog/upgrading/#upgrading-from-016x-to-017x","text":"","title":"Upgrading from 0.16.x to 0.17.x"},{"location":"changelog/upgrading/#updateall-and-deleteall","text":"UpdateAll and DeleteAll now renamed to UpdateAny and DeleteAny respectively. 0.16.x // UpdateAll err := repo . UpdateAll ( ctx , query , Set ( \"notes\" , \"notes\" )) // DeleteAll err := repo . DeleteAll ( ctx , query ) 0.17.x // UpdateAny updatedCount , err := repo . UpdateAny ( ctx , query , Set ( \"notes\" , \"notes\" )) // DeleteAny deletedCount , err := repo . DeleteAny ( ctx , query )","title":"UpdateAll and DeleteAll"},{"location":"changelog/upgrading/#upgrading-from-013x-to-014x","text":"","title":"Upgrading from 0.13.x to 0.14.x"},{"location":"changelog/upgrading/#updateall-and-deleteall_1","text":"UpdateAll and DeleteAll function now returns affected rows instead of just error. 0.13.x // UpdateAll err := repo . UpdateAll ( ctx , query , Set ( \"notes\" , \"notes\" )) // DeleteAll err := repo . DeleteAll ( ctx , query ) 0.14.x // UpdateAll updatedCount , err := repo . UpdateAll ( ctx , query , Set ( \"notes\" , \"notes\" )) // DeleteAll deletedCount , err := repo . DeleteAll ( ctx , query )","title":"UpdateAll and DeleteAll"},{"location":"changelog/upgrading/#upgrading-from-08x-to-09x","text":"","title":"Upgrading from 0.8.x to 0.9.x"},{"location":"changelog/upgrading/#association-definition","text":"Before 0.9.x all association is saved as is when its parent is modified, after this PR ( !127 ) this feature needs to be explicitly enabled. 0.8.x // User schema. type User struct { ID int Name string Address Address } 0.9.x // User schema. type User struct { ID int Name string Address Address `autosave:\"true\"` }","title":"Association Definition"},{"location":"changelog/upgrading/#upgrading-from-07x-to-08x","text":"","title":"Upgrading from 0.7.x to 0.8.x"},{"location":"changelog/upgrading/#import-path_1","text":"REL is migrated to a new github organization and all import path need to be moved from Fs02 to go-rel 0.7.x import github . com / Fs02 / rel 0.8.x import github . com / go - rel / rel","title":"Import Path"},{"location":"reference/adapter-mssql/","text":"Macro Rendering Error \u00b6 FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"github.com/go-rel/mssql"},{"location":"reference/adapter-mssql/#macro-rendering-error","text":"FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"Macro Rendering Error"},{"location":"reference/adapter-mysql/","text":"Macro Rendering Error \u00b6 FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"github.com/go-rel/mysql"},{"location":"reference/adapter-mysql/#macro-rendering-error","text":"FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"Macro Rendering Error"},{"location":"reference/adapter-postgres/","text":"Macro Rendering Error \u00b6 FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"github.com/go-rel/postgres"},{"location":"reference/adapter-postgres/#macro-rendering-error","text":"FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"Macro Rendering Error"},{"location":"reference/adapter-primaryreplica/","text":"Macro Rendering Error \u00b6 FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"github.com/go-rel/primaryreplica"},{"location":"reference/adapter-primaryreplica/#macro-rendering-error","text":"FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"Macro Rendering Error"},{"location":"reference/adapter-sql/","text":"Macro Rendering Error \u00b6 FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"github.com/go-rel/sql"},{"location":"reference/adapter-sql/#macro-rendering-error","text":"FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"Macro Rendering Error"},{"location":"reference/adapter-sqlite3/","text":"Macro Rendering Error \u00b6 FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"github.com/go-rel/sqlite3"},{"location":"reference/adapter-sqlite3/#macro-rendering-error","text":"FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"Macro Rendering Error"},{"location":"reference/changeset/","text":"Macro Rendering Error \u00b6 FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"github.com/go-rel/changeset"},{"location":"reference/changeset/#macro-rendering-error","text":"FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"Macro Rendering Error"},{"location":"reference/group/","text":"Macro Rendering Error \u00b6 FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"github.com/go-rel/rel/group"},{"location":"reference/group/#macro-rendering-error","text":"FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"Macro Rendering Error"},{"location":"reference/join/","text":"Macro Rendering Error \u00b6 FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"github.com/go-rel/rel/join"},{"location":"reference/join/#macro-rendering-error","text":"FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"Macro Rendering Error"},{"location":"reference/migration/","text":"Macro Rendering Error \u00b6 FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"github.com/go-rel/migration"},{"location":"reference/migration/#macro-rendering-error","text":"FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"Macro Rendering Error"},{"location":"reference/rel/","text":"Macro Rendering Error \u00b6 FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"github.com/go-rel/rel"},{"location":"reference/rel/#macro-rendering-error","text":"FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"Macro Rendering Error"},{"location":"reference/reltest/","text":"Macro Rendering Error \u00b6 FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"github.com/go-rel/reltest"},{"location":"reference/reltest/#macro-rendering-error","text":"FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"Macro Rendering Error"},{"location":"reference/sort/","text":"Macro Rendering Error \u00b6 FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"github.com/go-rel/rel/sort"},{"location":"reference/sort/#macro-rendering-error","text":"FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"Macro Rendering Error"},{"location":"reference/where/","text":"Macro Rendering Error \u00b6 FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"github.com/go-rel/rel/where"},{"location":"reference/where/#macro-rendering-error","text":"FileNotFoundError : [Errno 2] No such file or directory: 'godoc2md' Traceback (most recent call last): File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/macros/plugin.py\", line 258, in render return md_template.render(**self.variables) File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 1291, in render self.environment.handle_exception() File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/site-packages/jinja2/environment.py\", line 925, in handle_exception raise rewrite_traceback_stack(source=source) File \"<template>\", line 2, in top-level template code File \"/home/runner/work/doc/doc/doc/main.py\", line 79, in godoc result = subprocess.run( File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 505, in run with Popen(*popenargs, **kwargs) as process: File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 951, in __init__ self._execute_child(args, executable, preexec_fn, close_fds, File \"/opt/hostedtoolcache/Python/3.9.15/x64/lib/python3.9/subprocess.py\", line 1821, in _execute_child raise child_exception_type(errno_num, err_msg, err_filename) FileNotFoundError: [Errno 2] No such file or directory: 'godoc2md'","title":"Macro Rendering Error"}]}